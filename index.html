<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="color-scheme" content="light dark">
  <title>ÿÆÿ±Ÿäÿ∑ÿ© ÿßŸÑÿ≥ÿπŸàÿØŸäÿ© ÿßŸÑÿ™ŸÅÿßÿπŸÑŸäÿ©</title>

  <!-- Bootstrap RTL CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
        crossorigin="anonymous">

  <style>
    :root {
      color-scheme: light dark;
    }

    /* ========================================================================
       Error Handling Styles
       ======================================================================== */

    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.95);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9998;
      backdrop-filter: blur(3px);
    }

    .spinner-container {
      text-align: center;
    }

    .spinner-container p {
      margin-top: 1rem;
      color: #495057;
      font-size: 1.1rem;
    }

    .placeholder-image {
      opacity: 0.7;
      filter: grayscale(100%);
      background: #f8f9fa;
    }

    img.error-handled {
      border: 2px dashed #dee2e6;
    }

    #toast-container {
      z-index: 9999 !important;
    }

    .toast {
      min-width: 300px;
      box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }

    .toast-body {
      padding: 0.75rem 1rem;
      font-size: 0.95rem;
    }

    .image-loading {
      position: relative;
      background: #f8f9fa;
      min-height: 200px;
    }

    .image-loading::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #0d6efd;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }

    .modal-error {
      border-left: 4px solid #dc3545;
      background-color: #f8d7da;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 0.25rem;
    }

    .modal-error-message {
      color: #721c24;
      margin: 0;
    }

    .modal-warning {
      border-left: 4px solid #ffc107;
      background-color: #fff3cd;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 0.25rem;
    }

    .modal-warning-message {
      color: #856404;
      margin: 0;
    }

    .network-status {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 0.5rem 1rem;
      background: #dc3545;
      color: white;
      border-radius: 0.25rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      z-index: 9997;
      display: none;
    }

    .network-status.offline {
      display: block;
    }

    .toast.showing {
      opacity: 0;
    }

    .toast.show {
      opacity: 1;
      transition: opacity 0.15s linear;
    }

    /* ========================================================================
       Accessibility Styles
       ======================================================================== */

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    .sr-only-focusable:active,
    .sr-only-focusable:focus {
      position: static;
      width: auto;
      height: auto;
      overflow: visible;
      clip: auto;
      white-space: normal;
    }

    .skip-links {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 10000;
      background: #fff;
    }

    .skip-link {
      position: absolute;
      top: -100px;
      left: 10px;
      padding: 0.75rem 1.5rem;
      background: #0d6efd;
      color: white;
      text-decoration: none;
      font-weight: bold;
      border-radius: 0 0 0.25rem 0.25rem;
      transition: top 0.3s ease;
      z-index: 10001;
    }

    .skip-link:focus {
      top: 0;
      outline: 3px solid #0d6efd;
      outline-offset: 2px;
    }

    a:focus,
    a:focus-visible,
    button:focus,
    button:focus-visible,
    input:focus,
    input:focus-visible,
    select:focus,
    select:focus-visible,
    textarea:focus,
    textarea:focus-visible,
    [tabindex]:focus,
    [tabindex]:focus-visible {
      outline: none !important;
      box-shadow: none !important;
    }

    .map-container path:focus-visible {
      outline: none;
      fill: inherit !important;
    }

    .map-container:focus-within {
      box-shadow: none;
    }

    *:focus:not(:focus-visible) {
      outline: none;
    }

    *:focus-visible {
      outline: none !important;
      box-shadow: none !important;
    }

    .keyboard-hint {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.75);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.25rem;
      font-size: 0.875rem;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .map-container:focus-within .keyboard-hint {
      opacity: 1;
    }

    .modal {
      role: dialog;
    }

    .modal-dialog {
      isolation: isolate;
    }

    .modal-backdrop {
      pointer-events: none;
    }

    .modal.show .modal-backdrop {
      pointer-events: auto;
    }

    .modal .btn-close:focus,
    .modal .btn-close:focus-visible {
      outline: none !important;
      box-shadow: none !important;
    }

    .table {
      border-collapse: collapse;
    }

    .table th {
      font-weight: 600;
    }

    .table tbody tr:focus-within {
      background-color: rgba(13, 110, 253, 0.1);
      outline: 2px solid #0d6efd;
      outline-offset: -2px;
    }

    .table a:focus {
      outline-color: #ffc107;
    }

    #tooltip {
      role: tooltip;
    }

    #tooltip:focus {
      display: block !important;
    }

    button,
    .btn,
    a,
    [role="button"] {
      min-height: 44px;
      min-width: 44px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    a:not(.btn):not([role="button"]) {
      min-height: auto;
      min-width: auto;
      display: inline;
    }

    a:not(.btn):not(.skip-link) {
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 2px;
    }

    a:not(.btn):not(.skip-link):hover,
    a:not(.btn):not(.skip-link):focus {
      text-decoration-thickness: 2px;
    }

    .loading-overlay {
      role: alert;
      aria-live: assertive;
    }

    .toast {
      role: alert;
    }

    .toast[data-type="error"] {
      aria-live: assertive;
    }

    .toast[data-type="warning"] {
      aria-live: polite;
    }

    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }

      .modal.fade .modal-dialog {
        transition: none;
      }

      .carousel-item {
        transition: none;
      }

      .toast {
        transition: none;
      }
    }

    @media (prefers-contrast: high) {
      .map-container path {
        stroke: currentColor;
        stroke-width: 2;
      }

      .modal-content {
        border: 2px solid currentColor;
      }

      .table {
        border: 1px solid currentColor;
      }

      .table th,
      .table td {
        border: 1px solid currentColor;
      }

      *:focus-visible {
        outline-width: 4px;
      }
    }

    @media (prefers-color-scheme: dark) {
      .skip-link {
        background: #1a1a1a;
        color: #ffffff;
      }

      .skip-link:focus {
        outline-color: #ffc107;
      }

      #tooltip {
        background: rgba(0, 0, 0, 0.95);
        border-color: #444;
      }
    }

    @media (max-width: 768px) {
      button,
      .btn,
      [role="button"] {
        min-height: 48px;
        min-width: 48px;
      }

      *:focus-visible {
        outline-width: 4px;
      }
    }

    @media print {
      .skip-links,
      .keyboard-hint,
      .sr-only {
        display: none !important;
      }

      *:focus {
        outline: 2px solid #000 !important;
      }
    }

    /* ========================================================================
       Error Handling Mobile Styles
       ======================================================================== */

    @media (max-width: 576px) {
      .toast {
        min-width: 250px;
        font-size: 0.875rem;
      }

      #toast-container {
        padding: 1rem !important;
        right: 0 !important;
        left: 0 !important;
        top: 0 !important;
      }

      #toast-container .toast {
        margin: 0 auto 0.5rem auto;
      }
    }

    /* ========================================================================
       UX Engagement Enhancements
       ======================================================================== */

    :root {
      --bg-body: #ffffff;
      --text-base: #212529;
      --text-primary: #0d3b66;
      --text-secondary: rgba(33, 37, 41, 0.65);
      --accent-main: #0d6efd;
      --accent-contrast: #ffffff;
      --accent-soft: rgba(13, 110, 253, 0.12);
      --panel-bg: rgba(255, 255, 255, 0.95);
      --panel-border: rgba(13, 110, 253, 0.12);
      --panel-shadow: 0 30px 70px rgba(13, 110, 253, 0.12);
      --panel-radius: 24px;
      --panel-padding: 1.5rem;
      --panel-transition: cubic-bezier(0.22, 1, 0.36, 1);
      --panel-gradient: linear-gradient(145deg, rgba(13, 110, 253, 0.12), rgba(13, 110, 253, 0.03));
      --atmosphere-gradient: radial-gradient(circle at 20% 20%, rgba(13, 110, 253, 0.15), transparent 55%),
        radial-gradient(circle at 80% 10%, rgba(111, 66, 193, 0.18), transparent 45%),
        linear-gradient(180deg, rgba(240, 248, 255, 0.65) 0%, rgba(255, 255, 255, 0.2) 100%);
      --atmosphere-glow: radial-gradient(circle at 50% 50%, rgba(13, 110, 253, 0.12), transparent 65%);
    }

    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    [data-theme="dark"] {
      color-scheme: dark;
      --bg-body: #061225;
      --text-base: #f8fbff;
      --text-primary: #ffffff;
      --text-secondary: rgba(235, 240, 255, 0.9);
      --accent-main: #78b4ff;
      --accent-contrast: #051020;
      --accent-soft: rgba(120, 180, 255, 0.22);
      --panel-bg: rgba(14, 26, 45, 0.92);
      --panel-border: rgba(120, 180, 255, 0.22);
      --panel-shadow: 0 42px 88px rgba(3, 8, 16, 0.7);
      --panel-gradient: linear-gradient(145deg, rgba(18, 32, 56, 0.9), rgba(9, 18, 34, 0.85));
      --atmosphere-gradient: radial-gradient(circle at 20% 20%, rgba(120, 180, 255, 0.22), transparent 45%),
        radial-gradient(circle at 75% 15%, rgba(105, 125, 255, 0.26), transparent 45%),
        linear-gradient(180deg, rgba(6, 16, 32, 0.96) 0%, rgba(3, 10, 24, 0.9) 100%);
      --atmosphere-glow: radial-gradient(circle at 50% 50%, rgba(120, 180, 255, 0.28), transparent 60%);
    }

    .ux-atmosphere {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .ux-atmosphere__gradient,
    .ux-atmosphere__glow {
      position: absolute;
      inset: 0;
      background: var(--atmosphere-gradient);
      transform: scale(1.05);
      filter: saturate(1.05);
    }

    .ux-atmosphere__glow {
      background: var(--atmosphere-glow);
      opacity: 0.7;
      mix-blend-mode: screen;
      animation: glowPulse 12s ease-in-out infinite;
    }

    .ux-atmosphere__particles {
      position: absolute;
      inset: 0;
      overflow: hidden;
    }

    .ux-particle {
      position: absolute;
      display: block;
      width: 180px;
      height: 180px;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.35) 0%, rgba(255, 255, 255, 0) 70%);
      opacity: 0.3;
      animation: particleFloat 18s linear infinite;
    }

    .ux-particle--1 { top: 10%; left: 12%; animation-delay: -2s; }
    .ux-particle--2 { top: 24%; right: 8%; animation-delay: -6s; }
    .ux-particle--3 { bottom: 18%; left: 22%; animation-delay: -10s; }
    .ux-particle--4 { bottom: 8%; right: 16%; animation-delay: -14s; }

    @keyframes glowPulse {
      0%, 100% { opacity: 0.6; transform: scale(1.05); }
      50% { opacity: 0.85; transform: scale(1.1); }
    }

    @keyframes particleFloat {
      0% { transform: translate3d(0, 0, 0) scale(1); opacity: 0.3; }
      50% { transform: translate3d(-10px, -26px, 0) scale(1.05); opacity: 0.45; }
      100% { transform: translate3d(0, 0, 0) scale(1); opacity: 0.3; }
    }

    @keyframes cardIntro {
      0% {
        opacity: 0;
        transform: translateY(18px);
      }
      60% {
        opacity: 1;
        transform: translateY(-2px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .app-header {
      position: relative;
      z-index: 1;
      width: min(1380px, 100%);
      margin: 0 auto;
      padding: 2rem 2rem 1.5rem;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
    }

    .app-header__title-group {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
      text-align: right;
    }

    .app-header__title {
      margin: 0;
      font-size: 2rem;
      font-weight: 800;
      color: var(--text-primary);
    }

    .app-header__subtitle {
      margin: 0;
      font-size: 1rem;
      color: var(--text-secondary);
    }

    .app-header__actions {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
    }

    .cta-toggle {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 1.1rem;
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      background: var(--panel-bg);
      color: var(--text-primary);
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 200ms cubic-bezier(0.22, 1, 0.36, 1),
                  box-shadow 220ms ease,
                  background 200ms ease,
                  color 200ms ease;
    }

    .cta-toggle:hover,
    .cta-toggle:focus-visible {
      transform: translateY(-2px);
      box-shadow: 0 14px 28px rgba(13, 110, 253, 0.18);
      background: var(--accent-main);
      color: var(--accent-contrast);
      outline: none;
    }

    .cta-toggle:active {
      transform: translateY(0);
      box-shadow: 0 8px 18px rgba(13, 110, 253, 0.2);
    }

    .cta-toggle__icon {
      font-size: 1.15rem;
    }

    .cta-toggle__label {
      white-space: nowrap;
    }

    .app-shell,
    .map-column,
    .region-panel {
      position: relative;
      z-index: 1;
    }

    .app-shell {
      display: flex;
      flex-direction: row;
      align-items: stretch;
      justify-content: space-between;
      gap: 1.5rem;
      width: min(1380px, 100%);
      margin: 0 auto;
      padding: 2rem;
      box-sizing: border-box;
      flex: 1 1 auto;
      min-height: 0;
      transition: padding 240ms ease, gap 200ms ease;
    }

    .map-column {
      flex: 0 1 820px;
      min-width: 0;
      display: flex;
      justify-content: center;
      padding-top: 1.5rem;
    }

    .map-column .map-container {
      margin: 0;
      padding: 0;
    }

    .region-panel {
      position: relative;
      flex: 0 0 460px;
      max-width: 460px;
      background: var(--panel-gradient);
      border: 1px solid var(--panel-border);
      border-radius: var(--panel-radius);
      box-shadow: var(--panel-shadow);
      padding: var(--panel-padding);
      display: flex;
      flex-direction: column;
      min-height: 460px;
      z-index: 100;
      max-height: calc(100vh - 4rem);
      overflow: hidden;
      opacity: 0;
      transform: translateX(48px);
      pointer-events: none;
      transition:
        opacity 200ms ease-out,
        transform 320ms var(--panel-transition);
    }

    .region-panel.is-active {
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
    }

    .region-panel__header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 1.25rem;
    }

    .region-panel__controls {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex: 1 1 auto;
    }

    .region-panel__title-group {
      flex: 1 1 auto;
      text-align: right;
    }

    .region-panel__title {
      font-size: 1.35rem;
      margin: 0;
      color: var(--text-primary);
      line-height: 1.4;
    }

    .region-panel__meta {
      margin: 0.25rem 0 0;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .region-panel__nav,
    .region-panel__close {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 50%;
      border: 1px solid var(--accent-soft);
      background: var(--panel-bg);
      color: var(--accent-main);
      cursor: pointer;
      transition: transform 200ms cubic-bezier(0.22, 1, 0.36, 1),
                  box-shadow 220ms ease,
                  background 200ms ease,
                  color 200ms ease;
    }

    .region-panel__nav:hover,
    .region-panel__close:hover {
      background: var(--accent-main);
      color: var(--accent-contrast);
      box-shadow: 0 18px 32px rgba(13, 110, 253, 0.28);
      transform: translateY(-4px) scale(1.04);
    }

    .region-panel__nav:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }

    .region-panel__close {
      flex-shrink: 0;
      font-size: 1.4rem;
      border-radius: 16px;
    }

    .region-panel__close span {
      line-height: 1;
    }

    .region-panel__body {
      flex: 1 1 auto;
      overflow-y: auto;
      padding-inline: 0.25rem;
      margin-inline: -0.25rem;
      outline: none;
    }

    .region-panel__body:focus-visible {
      box-shadow: 0 0 0 2px rgba(13, 110, 253, 0.3);
      border-radius: 14px;
    }

    .region-panel__placeholder {
      margin: 0;
      color: var(--text-secondary);
      text-align: center;
      padding: 3rem 1rem;
      border: 1px dashed var(--accent-soft);
      border-radius: 18px;
      background: rgba(13, 110, 253, 0.04);
    }

    [data-theme="dark"] .region-panel__placeholder {
      background: rgba(122, 182, 255, 0.06);
    }

    .region-panel__subtitle {
      font-size: 0.9rem;
      color: var(--text-primary);
    }

    .region-panel__list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .employee-card {
      position: relative;
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.25rem;
      border-radius: 20px;
      background: var(--panel-bg);
      border: 1px solid rgba(13, 110, 253, 0.1);
      box-shadow: 0 18px 40px rgba(13, 110, 253, 0.12);
      text-align: right;
      width: 100%;
      opacity: 0;
      transform: translateY(18px);
      animation: cardIntro 420ms var(--panel-transition) forwards;
      color: var(--text-primary);
    }

    .employee-card__image {
      width: 110px;
      height: 110px;
      object-fit: cover;
      border-radius: 12px;
      flex-shrink: 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .employee-card__content {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
      flex: 1;
      min-width: 0;
    }

    .employee-card__name {
      display: block;
      color: var(--text-primary);
      font-weight: 700;
      font-size: 1.1rem;
    }

    .employee-card__name-en {
      display: block;
      font-size: 0.85rem;
      color: var(--text-base);
      margin-top: 0.1rem;
    }

    .employee-card__position {
      display: block;
      margin-top: 0.5rem;
      font-size: 0.95rem;
      color: var(--text-base);
    }

    .employee-card__position-en {
      display: block;
      font-size: 0.85rem;
      color: var(--text-base);
      margin-top: 0.1rem;
    }

    .employee-card__badge {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.25rem 0.8rem;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent-main);
      font-size: 0.85rem;
      font-weight: 600;
    }

    .region-panel-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(13, 110, 253, 0.18);
      opacity: 0;
      pointer-events: none;
      transition: opacity 250ms ease;
      z-index: 998;
      display: none;
    }

    .region-panel-backdrop.is-active {
      opacity: 1;
      pointer-events: none;
    }

    .map-container path.region-active {
      stroke: var(--accent-main);
      stroke-width: 2;
      fill: var(--accent-soft);
      filter: drop-shadow(0 0 18px rgba(13, 110, 253, 0.35));
    }

    .map-container path.region-dim {
      opacity: 1;
    }

    [data-theme="dark"] .cta-toggle {
      background: rgba(16, 29, 48, 0.85);
      border-color: rgba(122, 182, 255, 0.35);
      color: var(--text-primary);
      box-shadow: 0 16px 40px rgba(8, 17, 33, 0.5);
    }

    [data-theme="dark"] .cta-toggle:hover,
    [data-theme="dark"] .cta-toggle:focus-visible {
      box-shadow: 0 16px 32px rgba(122, 182, 255, 0.25);
    }

    [data-theme="dark"] .region-panel__placeholder {
      background: rgba(122, 182, 255, 0.08);
      border-color: rgba(122, 182, 255, 0.25);
    }

    [data-theme="dark"] .employee-card {
      background: rgba(16, 29, 48, 0.9);
      border-color: rgba(122, 182, 255, 0.18);
      box-shadow: 0 24px 44px rgba(8, 17, 33, 0.6);
    }

    [data-theme="dark"] .map-container path.region-active {
      filter: drop-shadow(0 0 16px rgba(122, 182, 255, 0.4));
    }

    @media (max-width: 1200px) {
      .app-header {
        padding: 1.75rem 1.5rem 1.25rem;
        gap: 1rem;
      }

      .app-shell {
        padding: 1.5rem;
        gap: 1.25rem;
      }

      .region-panel {
        flex: 0 0 420px;
        max-width: 420px;
      }

      .map-column {
        flex: 1 1 auto;
        padding-top: 2.75rem;
      }
    }

    @media (max-width: 992px) {
      .ux-atmosphere__particles {
        display: block;
      }

      .ux-atmosphere__glow {
        animation: none;
        transform: none;
        opacity: 0.5;
      }

      .ux-particle {
        animation: none;
        transform: none;
        opacity: 0.2;
      }

      .app-header {
        flex-direction: column;
        align-items: stretch;
        text-align: center;
        padding: 1.5rem 1.25rem 1rem;
      }

      .app-header__title-group {
        text-align: center;
      }

      .app-header__actions {
        justify-content: center;
      }

      .app-shell {
        flex-direction: column;
        gap: 1.25rem;
        padding: 1rem;
      }

      .map-column {
        justify-content: stretch;
        padding-top: 1.5rem;
      }

      .region-panel {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        max-width: none;
        width: 100%;
        max-height: 85vh;
        border-radius: 30px 30px 0 0;
        transform: translateY(100%);
        padding: 1.75rem 1.25rem 1.5rem;
        z-index: 999;
      }

      .region-panel.is-active {
        transform: translateY(0);
      }

      .region-panel__body {
        padding-inline: 0.5rem;
      }

      .region-panel-backdrop {
        display: block;
        background: rgba(13, 110, 253, 0.1);
      }
    }

    @media (max-width: 576px) {
      .app-header {
        padding: 1.25rem 1rem 0.75rem;
      }

      .cta-toggle {
        width: 100%;
        justify-content: center;
      }

      .app-shell {
        padding: 0.75rem;
      }

      .region-panel {
        padding: 1.5rem 1rem;
        max-height: 90vh;
      }

      .region-panel__title {
        font-size: 1.2rem;
      }

      .employee-card {
        padding: 0.9rem 1rem;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .ux-atmosphere__glow,
      .ux-particle,
      .region-panel,
      .region-panel-backdrop,
      .employee-card,
      .region-panel__nav,
      .region-panel__close,
      .map-container path {
        transition: none !important;
        animation: none !important;
      }

      .ux-atmosphere__gradient,
      .ux-atmosphere__glow {
        transform: none;
      }

      .map-container path.region-active {
        filter: none;
      }
    }

    .region-panel__list .employee-card:nth-child(1) { animation-delay: 40ms; }
    .region-panel__list .employee-card:nth-child(2) { animation-delay: 90ms; }
    .region-panel__list .employee-card:nth-child(3) { animation-delay: 140ms; }
    .region-panel__list .employee-card:nth-child(4) { animation-delay: 190ms; }
    .region-panel__list .employee-card:nth-child(5) { animation-delay: 240ms; }
    .region-panel__list .employee-card:nth-child(6) { animation-delay: 290ms; }
    .region-panel__list .employee-card:nth-child(n+7) { animation-delay: 320ms; }

    /* ========================================================================
       Mobile Optimization Styles
       ======================================================================== */

    html {
      -webkit-text-size-adjust: 100%;
      -moz-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
      text-size-adjust: 100%;
      scroll-behavior: smooth;
    }

    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    @media (max-width: 768px) {
      html, body {
        overflow-x: hidden;
        width: 100%;
        max-width: 100%;
        background-color: var(--bg-body);
        color: var(--text-base);
      }

      * {
        color: inherit;
      }

      h1, h2, h3, h4, h5, h6 {
        color: var(--text-primary);
      }

      p, div, span, td, th {
        color: var(--text-secondary);
      }

      a {
        color: var(--accent-main);
      }

      button,
      .btn,
      a.btn,
      [role="button"] {
        min-height: 48px !important;
        min-width: 48px !important;
        padding: 12px 20px !important;
        font-size: 1rem !important;
      }

      .btn-primary,
      .btn-close {
        min-height: 48px !important;
        min-width: 48px !important;
      }

      .btn-close {
        padding: 12px !important;
        font-size: 1.5rem !important;
      }

      .map-container {
        margin: 0 auto;
        padding: 10px;
        max-width: 100%;
        width: 100%;
        height: auto;
        overflow: visible;
        box-sizing: border-box;
      }

      .map-container svg {
        width: 100% !important;
        height: auto !important;
        max-height: none !important;
        max-width: 100% !important;
        display: block !important;
        margin: 0 auto !important;
      }

      body.is-mobile .map-container {
        max-width: 100% !important;
        padding: 10px !important;
        height: auto !important;
      }

      body.is-mobile .map-container svg {
        max-width: 100% !important;
        width: 100% !important;
      }

      .map-container path {
        stroke-width: 3 !important;
        cursor: pointer;
        stroke-opacity: 0.8;
      }

      .map-container path:active {
        fill: rgba(52, 152, 219, 0.5) !important;
      }

      .map-container path:hover {
        fill: rgba(52, 152, 219, 0.3) !important;
      }

      .modal-dialog {
        margin: 0;
        max-width: 100%;
        height: 100%;
      }

      .modal-content {
        height: 100%;
        border: 0;
        border-radius: 0;
        background-color: var(--panel-bg) !important;
        color: var(--text-primary) !important;
      }

      .modal-body {
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        padding: 1rem;
        background-color: var(--panel-bg) !important;
        color: var(--text-primary) !important;
      }

      .modal-header {
        padding: 1rem;
        border-bottom: 1px solid #dee2e6;
        background-color: var(--panel-bg) !important;
        color: var(--text-primary) !important;
      }

      .modal-title {
        color: var(--text-primary) !important;
      }

      .modal .btn-close {
        width: 44px;
        height: 44px;
        padding: 0;
        margin: 0;
        opacity: 1;
      }

      .modal h1, .modal h2, .modal h3, .modal h4, .modal h5, .modal h6 {
        color: var(--text-primary) !important;
      }

      .modal p, .modal div, .modal span {
        color: var(--text-secondary) !important;
      }

      .modal .table {
        color: var(--text-secondary) !important;
        background-color: var(--panel-bg) !important;
      }

      .modal .table th,
      .modal .table td {
        color: var(--text-secondary) !important;
        background-color: transparent !important;
      }

      .modal .table-striped tbody tr:nth-of-type(odd) {
        background-color: rgba(0, 0, 0, 0.05) !important;
      }

      .modal .table-light {
        background-color: var(--panel-bg) !important;
        color: var(--text-secondary) !important;
      }

      .modal a {
        color: var(--accent-main) !important;
      }

      .modal a:hover {
        color: var(--accent-main) !important;
      }

      .modal .btn-primary {
        color: var(--accent-contrast) !important;
        background-color: var(--accent-main) !important;
        border-color: var(--accent-main) !important;
        transition: transform 200ms cubic-bezier(0.22, 1, 0.36, 1),
                    box-shadow 220ms ease,
                    background-color 220ms ease,
                    border-color 220ms ease;
        will-change: transform, box-shadow;
      }

      .modal .btn {
        display: inline-block !important;
        min-height: 48px !important;
      }

      .modal a.btn-primary {
        color: var(--accent-contrast) !important;
      }

      .modal .btn-primary:hover,
      .modal .btn-primary:focus-visible {
        transform: translateY(-3px);
        box-shadow: 0 16px 34px rgba(13, 110, 253, 0.28);
      }

      .modal .btn-primary:active {
        transform: translateY(-1px);
        box-shadow: 0 10px 20px rgba(13, 110, 253, 0.24);
      }

      .carousel {
        margin-bottom: 1rem;
      }

      .carousel-item img {
        max-height: 50vh;
        object-fit: contain;
      }

      .carousel-control-prev,
      .carousel-control-next {
        width: 15%;
        opacity: 0.8;
      }

      .carousel-control-prev-icon,
      .carousel-control-next-icon {
        width: 40px;
        height: 40px;
      }

      .carousel::after {
        content: "ŸÖÿ±ÿ± ŸÑŸÑŸäÿ≥ÿßÿ± ÿ£Ÿà ÿßŸÑŸäŸÖŸäŸÜ";
        position: absolute;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.6);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
        font-size: 0.75rem;
        opacity: 0;
        animation: swipeHint 2s ease-in-out 1s;
        pointer-events: none;
      }

      @keyframes swipeHint {
        0%, 100% { opacity: 0; }
        20%, 80% { opacity: 1; }
      }

      #tooltip {
        font-size: 16px;
        padding: 8px 12px;
        max-width: 200px;
        white-space: normal;
        word-wrap: break-word;
      }

      .map-container:active #tooltip {
        transform: translateY(-60px);
      }

      .btn {
        font-size: 1rem;
        padding: 0.75rem 1.5rem;
      }

      .modal-body .btn {
        width: 100%;
        margin-top: 0.5rem;
      }

      .modal-footer .btn {
        width: 100%;
        margin: 0.25rem 0;
      }

      .loading-overlay .spinner-border {
        width: 4rem !important;
        height: 4rem !important;
      }

      .loading-overlay p {
        font-size: 1.25rem;
      }

      .network-status {
        bottom: 10px;
        right: 10px;
        left: 10px;
        text-align: center;
        font-size: 0.875rem;
      }
    }

    .is-mobile button,
    .is-mobile .btn,
    .is-mobile a.btn,
    .is-mobile [role="button"] {
      min-height: 48px;
      min-width: 48px;
      padding: 12px 20px;
      font-size: 1rem;
    }

    .is-mobile * {
      -webkit-tap-highlight-color: transparent;
    }

    .is-mobile button:active,
    .is-mobile .btn:active,
    .is-mobile a:active,
    .is-mobile [role="button"]:active {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .modal-body,
    .table-responsive {
      -webkit-overflow-scrolling: touch;
    }

    @media (min-width: 577px) and (max-width: 768px) {
      .modal-dialog {
        max-width: 90%;
      }

      .modal-content {
        background-color: var(--panel-bg) !important;
        color: var(--text-primary) !important;
      }

      .modal-title,
      .modal-body,
      .modal-header {
        color: var(--text-secondary) !important;
      }

      .modal .table {
        color: var(--text-secondary) !important;
      }
    }

    @media (max-width: 576px) {
      .table-responsive {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      .table {
        font-size: 0.875rem;
      }

      .table th,
      .table td {
        padding: 0.75rem;
        white-space: nowrap;
      }

      .table a {
        display: inline-block;
        min-height: 44px;
        line-height: 44px;
        padding: 0 8px;
        margin: -8px 0;
      }

      .is-mobile .table thead {
        display: none;
      }

      .is-mobile .table,
      .is-mobile .table tbody,
      .is-mobile .table tr,
      .is-mobile .table td {
        display: block;
        width: 100%;
      }

      .is-mobile .table tr {
        margin-bottom: 1rem;
        border: 1px solid #dee2e6;
        border-radius: 0.25rem;
        padding: 0.5rem;
      }

      .is-mobile .table td {
        text-align: right !important;
        padding: 0.5rem;
        position: relative;
        padding-right: 50%;
      }

      .is-mobile .table td:before {
        content: attr(data-label);
        position: absolute;
        right: 0.5rem;
        font-weight: bold;
        text-align: right;
      }

      #toast-container {
        top: auto !important;
        bottom: 20px !important;
        right: 10px !important;
        left: 10px !important;
        padding: 0 !important;
      }

      .toast {
        width: 100%;
        margin: 0 0 0.5rem 0;
        border-radius: 0.5rem;
      }

      .toast-body {
        font-size: 1rem;
        padding: 1rem;
      }
    }

    @media (max-width: 768px) and (orientation: landscape) {
      .map-container svg {
        max-height: 70vh;
      }

      .modal-dialog {
        max-height: 90vh;
      }

      .carousel-item img {
        max-height: 60vh;
      }
    }

    @supports (padding: max(0px)) {
      .modal-header,
      .modal-body,
      .modal-footer {
        padding-right: max(1rem, env(safe-area-inset-right));
        padding-left: max(1rem, env(safe-area-inset-left));
      }

      .modal-header {
        padding-top: max(1rem, env(safe-area-inset-top));
      }

      .modal-footer {
        padding-bottom: max(1rem, env(safe-area-inset-bottom));
      }

      #toast-container {
        padding-right: env(safe-area-inset-right);
        padding-left: env(safe-area-inset-left);
        padding-bottom: env(safe-area-inset-bottom);
      }
    }

    @media (display-mode: standalone) {
      body {
        padding-top: env(safe-area-inset-top);
      }
    }

    /* Dark Theme Modal Styling */
    [data-theme="dark"] .modal-content {
      background-color: #1a1a1a !important;
      border-color: #333333 !important;
      color: #f0f0f0 !important;
    }

    [data-theme="dark"] .modal-header {
      background-color: #1a1a1a !important;
      border-color: #333333 !important;
      color: #f0f0f0 !important;
    }

    [data-theme="dark"] .modal-body {
      background-color: #1a1a1a !important;
      color: #f0f0f0 !important;
    }

    [data-theme="dark"] .modal-title {
      color: #f0f0f0 !important;
    }

    [data-theme="dark"] .modal .btn-close {
      filter: invert(1) !important;
    }

    [data-theme="dark"] .modal .btn-primary {
      background-color: var(--accent-main) !important;
      border-color: var(--accent-main) !important;
      color: var(--accent-contrast) !important;
    }

    [data-theme="dark"] .modal .btn-secondary {
      background-color: #444444 !important;
      border-color: #555555 !important;
      color: #f0f0f0 !important;
    }

    [data-theme="dark"] .modal a {
      color: #64b5f6 !important;
    }

    [data-theme="dark"] .modal .table {
      border-color: #333333 !important;
      color: #f0f0f0 !important;
    }

    [data-theme="dark"] .modal .table thead th {
      border-color: #333333 !important;
      background-color: #222222 !important;
      color: #f0f0f0 !important;
    }

    [data-theme="dark"] .modal .table tbody tr {
      border-color: #333333 !important;
    }

    [data-theme="dark"] .modal .table tbody tr:nth-of-type(odd) {
      background-color: rgba(255, 255, 255, 0.05) !important;
    }

    @media (min-width: 769px) and (max-width: 1024px) {
      .map-container {
        max-width: 90%;
      }

      .modal-dialog {
        max-width: 600px;
      }

      .is-tablet .table {
        font-size: 0.95rem;
      }
    }

    @media (min-width: 577px) and (max-width: 768px) {
      .modal-dialog {
        margin: 1rem;
      }

      .modal-content {
        border-radius: 0.5rem;
      }
    }

    @media print {
      .modal-backdrop,
      .btn-close,
      .carousel-control-prev,
      .carousel-control-next,
      #toast-container {
        display: none !important;
      }

      .modal {
        position: static;
      }

      .modal-dialog {
        max-width: 100%;
      }
    }

    .modal,
    .carousel-item,
    .toast {
      will-change: transform;
      transform: translateZ(0);
    }

    @media (max-width: 768px) {
      * {
        animation-duration: 0.2s !important;
        transition-duration: 0.2s !important;
      }
    }

    /* ========================================================================
       Modal and Employee Profile Styling
       ======================================================================== */

    .modal-body {
      padding: 2rem 1rem;
      text-align: center;
    }

    /* ========================================================================
       Map Container Styles
       ======================================================================== */

    body, html { margin:0; padding:0; min-height:100%; background-color: var(--bg-body); color: var(--text-base); transition: background-color 200ms ease, color 200ms ease; }
    .map-container { position: relative; width:100%; margin:0; }
    .map-container svg { width:100%; height:auto; display:block; }
    #tooltip {
      position: absolute; pointer-events: none; display: none;
      background: var(--panel-bg); border:1px solid var(--accent-main);
      color: var(--text-primary); border-radius:4px; padding:6px 10px; font-size:14px;
      box-shadow:0 2px 6px rgba(0,0,0,0.2); white-space:nowrap; z-index:10;
    }
    .map-container path {
      fill: transparent; pointer-events: all; cursor: pointer;
      stroke: rgba(52,152,219,0.5); stroke-width:1; transition: fill .2s;
    }
    .map-container path:hover { fill: rgba(52,152,219,0.3); }
  </style>
</head>
<body>

  <div class="ux-atmosphere" aria-hidden="true">
    <div class="ux-atmosphere__gradient"></div>
    <div class="ux-atmosphere__glow"></div>
    <div class="ux-atmosphere__particles">
      <span class="ux-particle ux-particle--1"></span>
      <span class="ux-particle ux-particle--2"></span>
      <span class="ux-particle ux-particle--3"></span>
      <span class="ux-particle ux-particle--4"></span>
    </div>
  </div>

  <header class="app-header" id="appHeader">
    <div class="app-header__title-group">
      <h1 class="app-header__title">ŸÖŸàÿ∏ŸÅŸä ŸàŸÉÿßŸÑÿ© ÿßŸÑŸÉŸáÿ±ÿ®ÿßÿ° ÿ®ÿßŸÑŸÖŸÜÿßÿ∑ŸÇ</h1>
      <p class="app-header__subtitle">ÿßŸÑÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿπÿßŸÖÿ© ŸÑÿ¥ÿ§ŸàŸÜ ÿ¥ÿ±ŸÉÿßÿ™ ÿßŸÑŸÉŸáÿ±ÿ®ÿßÿ°</p>
    </div>
    <div class="app-header__actions" role="group" aria-label="ÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑŸàÿßÿ¨Ÿáÿ©">
      <button type="button" class="cta-toggle" id="themeToggle" aria-pressed="false">
        <span class="cta-toggle__icon" aria-hidden="true">üåû</span>
        <span class="cta-toggle__label">ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÅÿßÿ™ÿ≠</span>
      </button>
    </div>
  </header>

  <div class="app-shell" id="appShell">
    <section class="map-column" id="mapColumn">
      <div class="map-container" id="map-container">
        <div id="tooltip"></div>

    <!-- INLINE SVG START -->
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <!-- Created for MapSVG plugin: http://mapsvg.com -->
    <svg
       xmlns:mapsvg="http://mapsvg.com"
       xmlns:dc="http://purl.org/dc/elements/1.1/"
       xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
       xmlns:svg="http://www.w3.org/2000/svg"
       xmlns="http://www.w3.org/2000/svg"
       mapsvg:geoViewBox="34.492946 32.271167 55.688143 16.387460"
       width="730.13947"
       height="600.4032">
     
      <path
         d="m 456.82718,487.03041 -10.13,2.63 -16.39,2.39 -58.85,5.04 -8.85,-0.7 -3.24,-0.72 -5.22,-2.39 -8.51,-5.59 0,0 -13.54,-12.09 -3.91,-6.36 -2.75,-2.96 -0.22,-1.6 1.23,-6.11 3.34,-6.09 0.08,-2.96 -1.06,-1.73 -3.6,-3.6 -3.07,-4.93 -5.76,-5.01 0,0 -4.34,-7.06 -4.77,-6.36 -0.58,-1.47 1.76,-8.48 -0.54,-6.95 2.33,-3.42 0.68,-2.34 -1.79,-13.1 0.96,-6.16 -0.31,-1.57 -6.45,-1.41 -5.65,1.47 -3.7,-1.28 -1.26,-2.3 0.28,-5.34 0.86,-2.93 -1.84,-1.88 -3.09,-0.85 -14.1,-0.63 -3.01,-1.63 -5.15,-11.26 -0.91,-5.64 -2.1,-4.72 -1.13,-4.86 -4.16,-3.3 -0.36,-3.13 0.44,-3.64 0,0 -0.04,-9.03 1.41,-4.88 -0.94,-3.6 2.95,-4.25 0.4,-3.14 0,0 3.04,-5.08 2.17,-1.58 1.5,0.12 5.17,2.55 3.87,0.81 5.73,0.5 5.67,-0.89 5.69,0.87 2.43,-1.79 0.85,-2.18 -1.91,-3.83 0.15,-2.3 5.42,-6.69 3.27,-2.52 12.88,-3.15 2.84,-2.81 3.09,-1.74 2.28,-4.47 2.02,-1.97 3.13,-0.82 8.3,1.06 7.2,-0.68 5.53,0.22 0.84,-3.9 -0.31,-3.16 -2.52,-4.86 1.08,-2.91 -0.14,-0.86 -6.69,-10.16 -3.6,-3.57 -0.49,-1.52 0.84,-5.74 -0.43,-5.12 4.01,-1.1 4.5,-5.87 2.46,-2.11 4.18,-1.84 0.62,-1.48 -0.15,-2.5 -1.34,-2.5 -3.6,-2.99 -2.35,-0.93 0,0 -0.68,-1.88 0.06,-1.59 0.99,-3.1 2.42,-3.32 3.15,-1.64 0,0 1.94,2.12 1.51,0.52 1.8,-0.86 1.3,-2.23 0,0 3.32,2.32 2.12,2.21 1.4,5.11 1.24,1.53 10.41,6.08 5.75,1.06 3.46,4.22 4.06,3.38 2.34,0.63 5.64,0.11 3.01,0.81 9.86,6.94 2.49,1.19 2.36,0.05 4.41,-1.01 1.55,0.22 6.45,6.08 1.47,2.52 8.88,3.16 3.86,2.08 1.09,2.56 0.43,4.96 0.38,22.63 -0.63,15.07 0.35,7.41 0.68,3.7 1.12,1.79 2.28,1.8 9.44,6.3 9.19,9.16 1.68,2.06 2.95,5.78 1.36,6.89 -0.02,7.75 z"
         title="Ar RiyƒÅ·∏ë"
         id="SA-01" />
      <path
         d="m 143.70718,343.80041 0,0 0.12,-0.02 -0.12,0.02 z m 114.74,-19.79 -0.44,3.64 0.36,3.13 4.15,3.3 1.13,4.86 2.11,4.72 0.91,5.64 5.15,11.26 3.01,1.63 14.1,0.63 3.09,0.85 1.84,1.88 -0.85,2.93 -0.29,5.33 1.26,2.31 3.7,1.28 5.65,-1.47 6.45,1.41 0.31,1.57 -0.96,6.17 1.79,13.1 -0.68,2.34 -2.33,3.43 0.55,6.94 -1.76,8.48 0.58,1.47 4.77,6.36 4.34,7.06 0,0 -4.02,1.47 -5.71,3.77 -5.22,-1.3 -2.26,0.25 -3.16,1.52 -4.55,0.28 -4.26,3.81 -6.41,3.06 -10.11,9.24 -2.31,1.14 -2.29,-0.24 -1.4,-1.02 -4.67,-9.07 0,0 -1.98,-1.93 -1.48,-0.22 -5.42,2.76 -4.16,-0.2 -4.61,1.77 -1.91,-1.46 -1.28,-3.77 -1.22,-1.45 -1.43,-0.61 -2.26,0.32 -1.36,1.41 -0.7,2.12 1.11,4.54 -0.12,2.36 -2.69,4.63 -1.37,3.56 -7.73,1.86 -4,4.1 0.17,1.42 0.67,0.7 3.66,1.09 0.97,1.53 -0.31,5.28 0.91,3.89 -0.27,4.44 1.3,1.54 3.69,2.13 2.06,3.06 1.59,1.05 2.59,0 2.21,-1.08 2.58,-8.98 2.4,-4.46 1.52,-0.59 4.61,-0.04 0.79,-0.5 0,0 1.51,-0.74 2.29,0.13 1.85,1.88 0.21,1.52 -1.31,6.92 2.19,4.44 -1.27,4.6 -0.76,1.42 -1.52,0.75 -4.74,-0.43 -2.24,0.37 -3.88,2.82 -0.75,0.06 -1.97,-1.87 -0.49,10 0.61,2.97 1.02,1.48 1.44,0.48 6.71,0.21 2.11,1.21 2.98,9.14 -1.5,6.41 0,0 -1.01,1.94 -3.55,2.05 -1.97,3.15 0,0 -0.4,-1.87 -0.27,-0.33 -0.95,-1.23 0.03,-0.49 -0.32,-0.57 -0.37,-0.37 -0.51,0.76 -0.36,-0.35 0.36,-1.15 -0.46,-0.24 -0.48,-0.65 0.15,-0.87 -0.73,-0.87 -0.54,-2.04 0.05,-0.8 -0.17,-1.41 -0.82,-0.8 0.15,-1.21 -1.41,-1.06 -0.63,-1.3 -2.26,-0.09 -1.06,-0.83 -0.19,-1.62 -1.74,-2.17 1.24,-4.89 -1.56,-0.4 -1.15,-0.92 -1.2,-2.73 1.29,-3 -0.2,-1.69 -3.05,-1.3 -1.11,-2.63 0.38,-1.51 -0.45,-1.44 -0.82,-0.58 -0.56,-1.36 -1.58,-0.81 0.3,-0.43 -0.48,-2.03 0.5,-2.77 -1.22,-1.31 -2.27,-0.56 -2.79,-2.11 -0.28,-1.02 1.04,0.93 0.34,-2.1 -1.13,-3.14 -1.43,-1.64 -2.06,0.57 -1.01,-0.32 0.18,0.78 1.11,0.52 -0.3,0.28 -1.35,-0.84 -0.43,-1.5 -1.42,-0.71 -0.3,-2 -1.3,-0.58 0.42,-1.26 -0.41,-1.12 -5.69,-3.91 -2.98,-0.95 -1.24,-2.03 -0.65,-0.05 0.14,-1.25 -2.29,0.07 -1.45,-1.52 -0.51,-1.48 -1.65,-0.59 -1.89,0.26 0.06,0.51 -0.75,0.13 -2.1,-1.56 -1.14,0.2 1.53,0.77 0.28,0.74 -2.67,-1.27 -5.15,-3.89 -1.76,-1.95 0.58,-0.54 -1.07,-0.75 0.18,-1.07 -0.96,0.31 -0.7,-0.68 -1.01,-1.32 0.23,-0.37 1,0.68 -0.4,-1.17 -0.99,0.09 -1.48,-1.98 -1.64,-3.02 0.52,-0.77 -0.17,-0.74 -1.45,-0.9 -0.15,0.64 0.6,0.97 -0.58,-0.22 -0.8,-2.17 0.89,0.43 0.34,-0.2 -0.53,-0.43 0.29,-0.25 -0.67,-0.12 -0.55,0.19 -2.05,-1.72 0.25,-1.31 -0.84,-0.77 -1.29,-0.07 -1.24,-1.94 0.16,-1.2 -1.32,-2.35 -1.66,-1 -0.89,-4.24 -0.83,-0.7 -1.27,-2.5 0.11,-0.78 0.87,-0.39 1.29,-0.9 0.7,-1.87 -1.22,-1.02 0.13,-0.82 -0.26,-0.74 0.9,-0.1 -0.92,-1.34 0.25,-0.39 -0.59,0 -0.24,0.29 -0.78,-0.67 -0.93,-6.07 -1.43,-3.12 -3.24,-4.23 -0.38,-1.86 0.39,-0.47 -0.51,-1.44 0.59,-0.78 1.37,-0.28 -1.02,1.88 0.52,0.64 0.46,-0.88 0.79,0.17 0.2,-2.75 1.22,0.1 -0.24,-0.86 0.56,-2.21 -0.34,-0.69 -0.56,2.85 -0.58,-0.26 0.8,-1.95 -0.32,-1.47 2.25,-4.19 -0.02,-1.7 0.44,-0.72 0.84,-0.18 0.32,-1.38 -1.17,-0.01 -0.15,0.92 -0.33,-0.19 -0.72,-0.57 0.48,-2.14 -0.1,-3.6 -1.88,-3.15 -0.39,-1.76 -1.17,-1.43 0.89,-0.9 -0.93,-0.07 -0.43,0.31 -4.27,-7.13 1.3,0.49 1.37,2.24 -0.19,0.47 1.19,0.21 0.51,-0.72 -1.58,-2.25 -0.05,-1.49 -2.29,0 0.32,-0.53 -0.89,0.1 -0.26,0.35 -1.44,-2.19 0.74,-1.65 -0.73,-3.8 -0.25,-0.76 -0.68,0.68 -1.68,-2.45 -0.09,-1.34 -0.33,-0.39 -0.23,-0.15 -0.98,-2.23 -0.07,-2.6 0,0 5.12,-0.4 3.08,-0.92 0.82,0.34 2.13,3.42 2.42,1.85 3.42,4.08 1.68,1.3 1.55,0.23 4.88,-1.11 1.58,0.37 0.43,3.86 0.7,0.58 10.44,-3.25 4.76,-0.31 1.07,1.39 0.28,3.25 -2.65,6.93 0.06,0.86 0.59,0.74 3.98,1.18 2.09,1.91 0.45,2.31 -0.83,3.87 0.65,1.58 4.76,0.56 2.33,-1.12 4.63,-4.1 6.79,2.21 1.62,-0.02 4.47,-6.66 9.34,-7.12 5.12,-5.32 2.45,-1.77 5.67,-2.31 0.56,-0.76 -0.4,-1.57 -5.35,-2.94 -0.76,-0.66 -0.2,-1.49 3.59,-2.87 11.75,-5.83 1.06,-1.53 0.69,-2.21 -0.16,-3.22 -1.11,-2.52 0.58,-2.32 3.24,-1.03 5.03,0.65 z"
         title="Makkah"
         id="SA-02" />
      <path
         d="m 130.84718,324.65041 -0.9,-0.61 -0.33,0.61 -0.7,-0.29 -0.33,-0.44 -1.1,-1 0.38,-0.9 -1,0.41 -1.03,-1.53 -1.82,-1.19 0.16,-0.31 -0.62,-0.34 -1.13,0.46 -3.64,-2.84 0.62,-0.51 -0.59,-0.29 0.58,-1.68 -1.39,0.76 0.45,0.38 -0.44,1.27 -1.68,-0.19 -2.75,-2.06 -1.19,-2.11 -0.79,0.16 -0.38,-0.71 -0.69,-0.14 -0.09,-0.83 -1.55,0.6 -1.04,-0.36 -0.08,0.81 0.54,0.16 -0.37,0.91 -1.51,0.05 -0.66,-0.98 -1.17,0.09 -1.82,-2.71 -1.49,-1.07 0.31,-1.82 0.67,0.46 0.26,-1.12 -1.18,-1.47 -0.42,-1.45 -1.040004,-0.88 0,0 0.550004,-3.24 0.95,-1.47 5.65,-0.48 0,0 2.36,-0.91 0,0 0.79,-0.71 0,0 1.17,-1.81 0,0 0.55,-0.71 0,0 1.55,-0.41 2.31,0.45 0,0 2.58,-0.03 1.61,-0.83 0.92,-1.54 0.22,-1.56 0,0 -0.11,-3.18 0,0 -0.22,-10.27 0,0 0.84,-4.77 0,0 0.1,-0.74 0,0 0.25,-2.3 0,0 -1.12,-1.4 0,0 -3.17,-0.13 0,0 -0.74,-0.31 0,0 -1.79,-6.32 0,0 -1.8,-3.88 -3.72,-3.33 0,0 -2.17,-1.85 -0.67,-1.64 0,0 -0.54,-2.27 -0.73,-0.61 0,0 -2.23,-1.15 0,0 -4.010004,-2.52 -1.53,0.17 0,0 -1.95,1.78 -0.28,-1.56 0,0 -0.81,-3.12 -1.69,-3.17 0,0 -0.67,-1.68 0,0 0.16,-2.33 0,0 3.15,-5.54 0.26,-1.76 0,0 -0.36,-1.18 0,0 -1.54,-0.95 0,0 -4.78,-1.35 0,0 -1.6,-1.31 0,0 -1,-1.58 -0.69,-2.63 0.81,-8.93 0,0 -0.99,-4.2 0,0 -1.43,-1.38 0,0 -1.54,-0.18 0,0 -3.12,0.69 0,0 -0.81,-0.48 -0.09,-0.75 1,-1.47 0,0 3.12,-0.69 0,0 1.62,-0.43 0,0 1.67,-0.81 0,0 1.59,-0.57 0,0 3.22,-1.5 0,0 1.64,-1.06 0,0 0.76,-0.34 0,0 1.55,-0.39 0,0 3.96,1.66 0,0 2.360004,1.74 0,0 2.42,0.31 1.73,-0.42 5.85,-3.33 0,0 1.55,-0.46 0,0 0.78,0.31 0,0 1.11,1.52 0,0 0.8,3.16 0,0 0.56,1.68 0,0 2.45,4.27 0,0 1.09,1.55 0,0 0.81,0.56 0,0 1.52,0.26 0,0 5.38,0.24 1,1.24 0,0 -0.2,1.59 0,0 0.15,0.79 1.47,1.04 0,0 2.27,1.42 0,0 0.15,0.75 0,0 -0.43,2.4 0.19,0.75 0.74,0.34 0,0 0.75,-0.01 1.57,-1.19 0,0 1.54,-1.37 0,0 1.69,-1.29 1.65,-0.33 6.16,2.51 0.8,-0.64 -0.52,-1.5 0,0 -0.31,-1.5 0.42,-0.73 0.75,-0.04 0,0 1.28,1.18 0.96,3.08 0,0 2.36,0.83 0,0 2.36,0.58 2.27,1.43 0,0 1.52,1.23 0,0 2.42,1.83 2.26,0.41 0,0 6.57,-0.52 0,0 10.45,-2.02 0,0 1.53,-0.07 0,0 0.77,0.43 0,0 1.22,1.43 0,0 0.56,1.01 0,0 0.68,1.56 0.24,2.66 -0.75,2.42 -1.62,2.25 0,1.63 1.18,1.5 0.77,0.24 3.27,-0.84 0.73,0.25 0.36,0.79 -0.11,4.16 -1.9,10.91 2.08,9.8 -0.52,10.14 0.63,1.61 1.3,1.49 1.56,0.71 1.55,0.03 9.37,-3.24 8.06,-0.39 2.41,-1.18 3.87,-4.64 3.27,-1.25 6.68,-0.15 11.8,2.31 0,0 6.92,1.83 1.35,1.16 0.28,1.98 -0.57,11.32 1.74,2.02 5.3,1.39 1.41,1.13 3.15,10.79 4.08,3.38 0,0 -0.4,3.14 -2.95,4.25 0.94,3.6 -1.41,4.88 0.04,9.03 0,0 -5.05,-0.85 -3.23,1.03 -0.58,2.32 1.11,2.52 0.16,3.23 -0.69,2.21 -1.06,1.53 -11.75,5.84 -3.59,2.87 0.2,1.49 0.76,0.66 5.35,2.94 0.4,1.57 -0.56,0.76 -5.67,2.31 -2.45,1.77 -5.12,5.33 -9.34,7.12 -4.47,6.66 -1.62,0.02 -6.79,-2.21 -4.63,4.1 -2.33,1.12 -4.76,-0.56 -0.65,-1.58 0.83,-3.86 -0.45,-2.31 -2.09,-1.91 -3.98,-1.18 -0.59,-0.74 -0.06,-0.86 2.65,-6.92 -0.28,-3.25 -1.07,-1.39 -4.76,0.31 -10.44,3.25 -0.7,-0.58 -0.43,-3.86 -1.58,-0.37 -4.88,1.11 -1.55,-0.23 -1.67,-1.3 -3.42,-4.08 -2.42,-1.84 -2.12,-3.42 -0.82,-0.34 -3.08,0.92 -5.12,0.4 0,0 -0.21,0.03 0,0 -0.12,0.02 0,0 -0.64,-3.24 -1.32,-1.32 0.21,-1.05 -0.97,0.4 -0.65,-0.35 -0.13,0.75 0.84,0.4 -0.37,0.4 -0.86,-0.5 0.1,-1.51 -0.57,-1.35 0.13,-0.52 -0.78,-0.4 -0.7,-0.82 -0.95,-2.79 -0.01,-1.63 -1.02,-1.12 -0.92,-0.09 -0.87,-1.56 -2.41,-1.65 -0.58,-1.03 -0.44,-0.28 z"
         title="Al Madƒ´nah"
         id="SA-03" />
      <path
         d="m 545.08718,262.60041 1.22,0.53 0.35,2.07 -0.6,-1.32 -1.01,-0.6 0.04,-0.68 z m -8.35,-39.01 0.87,0.69 -0.05,1.6 -1.18,-1.16 -1.01,-0.12 0.21,-0.65 1.16,-0.36 z m -18.37,-29.14 1.75,1.05 4.11,1.08 -1.87,0.05 -0.52,-0.26 -2.37,0.75 -0.45,-0.6 0.45,-0.25 -0.11,-0.49 -1.17,-0.55 -2.13,2.34 0.34,0.57 -0.4,-0.13 -0.22,-0.78 0.55,-1.55 0.7,-0.87 1.34,-0.36 z m 19.57,33.55 0.38,0.99 0.46,-1.63 0.45,0.11 -0.06,2.39 0.79,0.44 1.19,-1.76 -0.36,-0.33 0.38,-1.81 0.25,0.39 0.12,1.06 0.38,-0.61 0.05,1.18 -0.98,0.58 0.08,1.05 -0.63,0.11 1.65,1.52 0.52,1.62 -0.54,4.1 0.45,0.68 -0.36,0.03 -0.1,1.48 -1,1.13 0.19,-0.78 -0.87,-1.22 -0.16,2.24 0.42,0.52 -0.83,2.12 0.19,1.3 -0.75,0.42 -2.62,-5.96 -0.76,-0.54 -0.52,0.32 -1.15,2.79 0.89,1.29 -0.52,0.67 0.04,3.02 0.61,0.16 0.8,-0.92 0.81,0.74 1.37,0.1 0.5,0.75 -0.15,0.79 0.63,0.57 -0.69,0.16 -0.37,1.04 1.28,2.91 1.81,2.68 1.09,0.66 0.7,2.02 0.75,0.4 -0.23,0.88 -0.41,0.18 -0.4,-1.47 -1.42,-0.33 -1,-1.47 -0.55,0.17 -0.47,-0.58 0.68,1.74 1.09,0.76 0.05,0.56 0.51,-0.72 0.22,0.28 0.24,1.8 1.28,1.16 0.67,1.46 1.26,0.44 0.07,1.1 2.04,2.54 0.4,0.04 -0.05,-1.1 -0.68,-0.91 0.66,-0.53 0.62,1.64 3.23,2.49 1.33,4.04 -0.34,2.41 1.25,2.03 -0.41,1.78 0.83,2.56 -0.27,0.88 0.89,0.45 -0.5,-0.65 0.32,-0.82 2.52,3.53 1.05,3.3 0.95,0.04 0.54,0.69 1.49,6.53 0.64,-1.84 1.58,-0.3 -0.25,0.48 1.08,2.13 3.69,4.38 4.58,0.8 2.45,-0.96 1.63,-1.8 1.16,0.39 1,-0.33 -0.1,0.51 0.6,0.44 0.76,-0.35 -0.66,1.28 0.13,2.42 1.45,-0.87 0.37,-1.39 1.6,-1.3 -0.09,-0.95 0.89,0.53 0.53,-0.43 0.41,1.64 1.03,-0.58 0.76,0.76 -0.62,0.64 -1.21,0.07 -0.54,0.95 -0.44,-0.16 -0.42,1.48 -3.07,2.44 -0.6,3.09 -0.56,0.13 0.13,1.7 2.24,0.42 0.9,-1.18 2.03,-0.18 1.67,0.66 1.51,2.12 1.63,-0.07 0.75,1.18 -0.51,4.23 34.3,41.63 23.79,4.76 59.71,13.76 7.05,-7.46 15.68,25.98 -22.97,73.24 -103.4,36.4 -39.96,7.94 -57.87,6.31 -32.09,15.68 -20.91,25.6 -4.87,12.21 -1.53,0.93 0,0 2.59,-24.45 7.99,-63.49 0,0 19.5,-152.83 0.02,-7.75 -1.36,-6.9 -2.96,-5.78 -1.67,-2.06 -9.19,-9.15 -9.44,-6.3 -2.29,-1.8 -1.12,-1.79 -0.68,-3.7 -0.34,-7.4 0.63,-15.07 -0.38,-22.62 -0.43,-4.96 -1.09,-2.56 -3.86,-2.08 -8.88,-3.17 -1.46,-2.52 -6.45,-6.08 -1.55,-0.22 -4.41,1.01 -2.35,-0.04 -2.5,-1.19 -9.86,-6.94 -3.01,-0.81 -5.64,-0.11 -2.35,-0.63 -4.06,-3.38 -3.46,-4.22 -5.74,-1.06 -10.41,-6.08 -1.23,-1.53 -1.41,-5.11 -2.12,-2.21 -3.32,-2.32 0,0 -1.47,-1.82 -0.38,-1.53 1.28,-4.67 9.15,-12.15 12.66,-23.67 8.26,-8.72 12.45,-4.39 0,0 5.1,0.13 2.64,-1.27 4.09,-3.16 31.35,4.11 0.87,0.67 3.36,5.38 0.61,2.55 0.22,4.61 3.53,4.7 -0.17,0.7 24.98,-0.43 1.18,1.14 1.28,0.47 -0.04,2.25 0.84,0.66 -0.18,0.34 0.85,0.15 -1.01,3.01 0.97,1.98 1.47,1.03 1.7,2.23 -0.69,0.53 -0.18,2.67 0.39,1 2.05,2.38 3.89,1.05 -0.77,0.92 -0.84,-0.08 0.08,1.05 1.59,1.81 1,0.1 0.05,1.35 2.03,1.26 -0.36,2.1 0.46,0.44 -0.08,0.47 -0.9,0.6 0,-0.89 -0.55,-0.04 0.29,-2 -0.72,1.02 -0.29,-1.41 -1.3,4.4 0.64,0.08 0.45,-1.25 0.35,2.38 0.64,-0.95 0.42,0.68 -0.34,1.18 1.07,-0.31 -0.32,0.58 -0.52,0.11 -0.05,0.82 -0.32,0.69 1.12,0.54 0.75,-1.32 0.63,0.19 -0.57,1.04 0.11,1.29 0.81,-0.41 -0.1,-1.04 1.56,-0.79 0.94,0.37 1.08,1.57 2.59,1.16 3.66,-0.06 1.69,0.83 0.61,1.33 1.12,0.63 0.2,1.82 -0.56,-0.15 0.25,-0.69 -0.36,-0.54 -0.71,1.15 -0.54,-0.61 -0.71,0.71 -0.75,-0.72 -0.74,0.47 -0.31,-0.45 -0.69,0.92 -0.82,-0.34 -0.33,0.73 0.41,-0.21 1.54,0.94 0.56,0.71 1.01,-0.24 -0.03,-1.05 1.36,0.77 -0.61,0.76 -0.73,0.07 0.32,0.92 -0.67,1.23 1.72,-1.09 1.62,0.54 -0.01,3.71 0.67,1.13 0.54,0.02 0.42,-0.06 0.53,-0.23 1.14,0.57 -0.48,1.89 -0.65,-0.23 -0.44,0.41 0.51,0.01 -0.2,0.56 0.76,-0.31 0.53,1.03 0.67,-1.73 0.5,0.35 -0.15,1.06 1.2,-0.66 1.46,0.51 -0.89,-1.68 1.27,-1.31 -1.73,-1.58 -0.68,0.08 0.65,-1.04 -0.21,-0.53 0.74,-0.47 0.46,1.97 1.11,0.06 0.23,1.5 -0.74,0.31 0.97,0.96 0.9,-0.7 0.59,-2.69 0.97,-1.31 -0.99,2.95 -0.44,1.56 -0.63,0.96 0.55,1.96 1.17,1.16 2.4,-1.43 1.07,0.41 -0.03,0.09 -0.49,-0.01 -0.09,0.04 -0.27,0.47 -0.27,-0.47 -2.28,1.16 0.96,1.23 1.49,-0.36 -0.16,0.73 -0.56,0.02 0.02,1.19 0.71,0.03 0.24,0.85 0.13,0.2 2.3,1.81 0.37,0.11 1.21,0.73 1.13,0.37 0.79,0.61 2.98,0.3 2.07,2.21 4.49,5.29 0.49,0.45 0.41,0.4 -0.59,0.09 -1.3,-1.73 -1.68,-0.43 -0.98,0.68 -1.23,-1.95 -0.06,-0.88 -0.47,2.24 0.15,0.95 0.81,0.2 -0.35,1.09 0.31,2.66 0.93,2.33 1.41,1.84 0.1,-1.15 0.31,-0.31 z"
         title="Ash Sharqƒ´yah"
         id="SA-04" />
      <path
         d="m 238.57718,264.11041 1.2,-1.37 4.95,-0.74 6,-3.57 5.95,-0.77 0.81,-0.65 0.05,-0.82 -2.4,-4.78 0.32,-2.44 1.26,-1.51 0.86,-0.19 3.95,1.42 2.43,0.25 0.47,-0.77 -0.82,-6.33 1.89,-4.8 0.77,-0.41 1.6,0.52 3.32,-0.78 0.87,-4.3 4.75,-4.83 11.89,-9.24 11.31,-5.23 2.76,-5.79 2.72,-2.76 14.5,-7.43 4.15,-1.34 2.37,0.86 4.44,4.49 5.99,4.12 7.47,0.54 5.05,-5.84 0,0 2.35,0.93 3.6,2.99 1.34,2.5 0.15,2.5 -0.62,1.48 -4.18,1.84 -2.46,2.11 -4.5,5.87 -4.01,1.1 0.43,5.12 -0.84,5.74 0.49,1.52 3.6,3.57 6.69,10.16 0.14,0.86 -1.08,2.91 2.52,4.86 0.31,3.16 -0.84,3.9 -5.53,-0.22 -7.2,0.68 -8.3,-1.06 -3.13,0.82 -2.02,1.97 -2.28,4.47 -3.09,1.74 -2.84,2.81 -12.88,3.15 -3.27,2.52 -5.42,6.69 -0.15,2.3 1.91,3.83 -0.85,2.18 -2.43,1.79 -5.69,-0.87 -5.67,0.89 -5.73,-0.5 -3.87,-0.81 -5.17,-2.55 -1.5,-0.12 -2.17,1.58 -3.04,5.08 0,0 -4.08,-3.38 -3.15,-10.8 -1.4,-1.13 -5.31,-1.39 -1.74,-2.01 0.58,-11.32 -0.28,-1.98 -1.35,-1.16 z"
         title="Al Qa≈üƒ´m"
         id="SA-05" />
      <path
         d="m 183.65718,221.36041 1.99,-2.39 2.34,-7.76 3.13,-3.74 0,0 4.44,-4.13 0.29,-2.41 0,0 -0.36,-0.76 0,0 -2.95,-1.84 0,0 -0.82,-0.36 0,0 -3.73,-2.16 -1.4,-3.91 0,0 -0.14,-0.92 0,0 -0.39,-1.63 0,0 -2.24,-9.37 -1.05,-2.51 0,0 -1.4,-1.64 -2.37,-0.99 0,0 -0.77,-0.46 -1.33,-2.43 -0.75,-0.31 0,0 -2.31,-0.67 0,0 -1.3,-1.59 0,0 -2.94,-2.27 -4.95,-1.3 0,0 -1.54,-0.24 0,0 -4.08,-0.72 0,0 -2.36,-0.52 -1.13,-1.33 0,0 3.69,-4.2 6.27,-3.54 9.93,-4.38 4.29,-0.69 13.07,-7.6 12.9,-5.53 3.04,0.66 0,0 4.38,1.9 2.37,0.37 20.96,-4.87 12.17,3.53 4.76,-1.35 4.45,-0.36 14.47,3.51 2.37,1.99 4.2,5.16 2.52,1.46 3.99,-0.21 4.62,-2.48 2.68,-0.47 0.67,0.8 0.88,6.22 1.42,1.46 0.96,0.31 6.49,-0.31 6,3.12 2.52,-0.84 5.05,-3.38 1.57,-0.21 1.58,1.23 1.08,1.62 5.28,9.66 2.78,7.7 2.02,2.48 2.44,1.44 9.98,1.29 3.28,1.26 1.62,0.95 6.08,5.52 1.03,1.87 0,0 -3.15,1.64 -2.42,3.32 -0.99,3.1 -0.06,1.59 0.68,1.88 0,0 -5.05,5.84 -7.47,-0.54 -5.99,-4.12 -4.44,-4.49 -2.37,-0.86 -4.15,1.34 -14.5,7.43 -2.72,2.76 -2.76,5.79 -11.31,5.23 -11.89,9.24 -4.75,4.83 -0.87,4.3 -3.32,0.78 -1.6,-0.52 -0.77,0.41 -1.89,4.8 0.82,6.33 -0.47,0.77 -2.43,-0.25 -3.95,-1.42 -0.86,0.19 -1.26,1.51 -0.32,2.44 2.4,4.78 -0.05,0.82 -0.81,0.65 -5.95,0.77 -6,3.57 -4.95,0.74 -1.2,1.37 0,0 -11.8,-2.31 -6.69,0.15 -3.27,1.25 -3.87,4.64 -2.41,1.18 -8.06,0.39 -9.37,3.24 -1.55,-0.03 -1.56,-0.7 -1.3,-1.49 -0.63,-1.61 0.51,-10.14 -2.07,-9.81 1.9,-10.9 0.12,-4.16 -0.37,-0.79 -0.73,-0.24 -3.27,0.83 -0.76,-0.24 -1.18,-1.5 0,-1.62 1.62,-2.26 0.74,-2.41 -0.24,-2.66 z"
         title="·∏®ƒÅ'il"
         id="SA-06" />
      <path
         d="m 89.197176,284.95041 1.2,0.84 0,0.66 -1.49,-0.68 0.29,-0.82 z m -7.94,-17.27 0.92,0.6 0.42,-0.21 0.96,2.68 -0.7,0 0.08,-1.17 -2.04,-1.11 0.36,-0.79 z m 4.56,-1.3 0.65,0.16 0.38,1.27 0.55,-0.18 -0.26,0.83 -0.21,-0.47 -1.25,0.04 0.41,-1.09 -0.67,-0.43 0.4,-0.13 z m -0.81,-1.47 0.9,0.87 -1.33,-0.1 0.43,-0.77 z m -3.62,-2.17 0.56,0.93 -0.85,0.56 -0.43,-0.67 0.72,-0.82 z m 2.01,-0.4 0.94,2.34 -1.03,-0.85 0.09,-1.49 z m 0.41,-0.85 0.41,0.44 -0.26,0.62 -0.63,-0.79 0.48,-0.27 z m -14.24,-2.19 1.39,1.61 -1.55,0.1 -0.63,-1.01 0.79,-0.7 z m 2.62,-1.99 0.67,0.53 -0.74,0.07 -1.33,-1.36 -0.02,-1.67 0.47,1.79 1.05,-0.63 -0.1,1.27 z m -65.0999998,-86.2 0.88,0.19 0.6,1.53 -1.02,0.43 -0.73,-1.53 -0.45,0.03 -0.06,0.82 -0.6,-0.11 0.24,-0.9 1.14,-0.46 z m -5.35,-2.13 0.48,0.71 -1.23,0.49 -0.45,-0.32 0.02,0.38 1.1,0.84 1.93,-0.34 -0.1,0.81 1.17,1.07 -2.38,0.35 -1.67,-1.25 -0.33,-2.16 1.46,-0.58 z m 47.9399998,-37.38 5.08,1.55 0,0 2.51,1.93 1.99,2.37 0,0 1.17,1.64 0,0 6.23,8.13 0,0 1.72,0.64 1.81,-0.32 0,0 3.28,-1.38 4.39,-1.03 0,0 4.46,-0.83 0,0 5.16,0.72 4.62,1.8 8.550004,0.72 0,0 1.57,-0.57 0,0 2.58,-6.05 0,0 1.26,-1.48 0,0 1.58,-0.72 0,0 2.87,-2.88 0,0 0.77,-0.41 1.57,0.95 0,0 0.46,1.64 0,0 -0.45,7.19 0.31,4.39 0,0 0.57,2.64 0,0 0.75,1.64 0,0 3.48,3.55 2.42,1.21 0,0 3.31,1.1 0,0 10.14,1.18 0,0 2.4,-1.75 0.79,-0.04 0,0 1.54,1.26 0,0 0.78,0.47 0,0 1.64,-0.31 0,0 0.75,0.21 0.79,2.47 1.29,1.08 0,0 1.73,-0.09 3.56,-1.88 0,0 3.39,-0.99 1.64,0.49 1.4,1.22 0,0 1.13,1.32 2.36,0.52 0,0 4.08,0.72 0,0 1.54,0.24 0,0 4.95,1.31 2.94,2.27 0,0 1.3,1.6 0,0 2.31,0.67 0,0 0.75,0.31 1.33,2.42 0.78,0.46 0,0 2.36,0.99 1.41,1.64 0,0 1.04,2.51 2.24,9.37 0,0 0.39,1.63 0,0 0.14,0.92 0,0 1.4,3.91 3.73,2.15 0,0 0.81,0.36 0,0 2.96,1.84 0,0 0.35,0.76 0,0 -0.29,2.41 -4.44,4.13 0,0 -3.13,3.74 -2.33,7.77 -1.99,2.39 0,0 -0.56,-1.01 0,0 -1.22,-1.43 0,0 -0.77,-0.43 0,0 -1.53,0.08 0,0 -10.45,2.03 0,0 -6.57,0.52 0,0 -2.26,-0.4 -2.42,-1.83 0,0 -1.52,-1.23 0,0 -2.27,-1.43 -2.36,-0.58 0,0 -2.35,-0.83 0,0 -0.96,-3.08 -1.28,-1.17 0,0 -0.75,0.04 -0.42,0.73 0.31,1.51 0,0 0.52,1.5 -0.8,0.64 -6.15,-2.51 -1.65,0.33 -1.68,1.29 0,0 -1.54,1.37 0,0 -1.57,1.19 -0.75,0.01 0,0 -0.74,-0.34 -0.19,-0.75 0.43,-2.4 0,0 -0.15,-0.75 0,0 -2.27,-1.42 0,0 -1.47,-1.04 -0.15,-0.79 0,0 0.2,-1.59 0,0 -1,-1.24 -5.38,-0.23 0,0 -1.52,-0.26 0,0 -0.81,-0.56 0,0 -1.09,-1.55 0,0 -2.45,-4.27 0,0 -0.56,-1.68 0,0 -0.8,-3.16 0,0 -1.11,-1.52 0,0 -0.77,-0.31 0,0 -1.55,0.46 0,0 -5.85,3.33 -1.73,0.42 -2.42,-0.31 0,0 -2.350004,-1.74 0,0 -3.96,-1.66 0,0 -1.55,0.39 0,0 -0.76,0.34 0,0 -1.64,1.06 0,0 -3.22,1.5 0,0 -1.59,0.57 0,0 -1.67,0.81 0,0 -1.62,0.43 0,0 -3.12,0.69 0,0 -1,1.47 0.09,0.75 0.81,0.48 0,0 3.12,-0.68 0,0 1.54,0.18 0,0 1.43,1.38 0,0 0.99,4.2 0,0 -0.81,8.93 0.69,2.63 1,1.58 0,0 1.6,1.31 0,0 4.78,1.35 0,0 1.54,0.95 0,0 0.36,1.18 0,0 -0.26,1.76 -3.15,5.54 0,0 -0.16,2.33 0,0 0.67,1.68 0,0 1.69,3.17 0.81,3.12 0,0 0.28,1.56 1.95,-1.78 0,0 1.53,-0.17 4.010004,2.52 0,0 2.23,1.16 0,0 0.73,0.62 0.54,2.27 0,0 0.67,1.64 2.17,1.85 0,0 3.72,3.33 1.8,3.88 0,0 1.79,6.32 0,0 0.74,0.31 0,0 3.17,0.13 0,0 1.12,1.4 0,0 -0.25,2.3 0,0 -0.1,0.74 0,0 -0.84,4.77 0,0 0.22,10.27 0,0 0.12,3.18 0,0 -0.22,1.56 -0.92,1.54 -1.61,0.83 -2.58,0.03 0,0 -2.31,-0.45 -1.55,0.41 0,0 -0.55,0.71 0,0 -1.17,1.81 0,0 -0.79,0.71 0,0 -2.36,0.91 0,0 -5.65,0.48 -0.95,1.47 -0.550004,3.24 0,0 -1.62,-2.9 0.14,-0.69 -0.84,0.33 -0.56,-1.64 -2.78,-1.51 0.33,-0.45 -0.77,-1.66 0.84,0.07 -0.05,-1.24 -0.92,-0.35 0.42,0.41 -0.78,0.58 -1.33,-1.78 0.74,-0.6 1.35,0.3 -0.89,0.44 1.2,0.37 0.35,-1.18 1.15,-0.94 -0.69,-1.49 1.33,-3.11 -1.45,-2.83 0.79,-1.46 -0.59,-2.62 -4.67,-5.22 -1.37,-3.49 0.09,-1.57 -2.7,-2.19 0.04,-1.78 -0.93,-0.25 -0.22,-2.07 -1.07,-1.57 -2.11,-0.91 -2.23,-3.18 -0.39,0.01 0.53,1.51 -0.37,0.18 -0.61,-0.06 -0.53,-0.89 -0.9,-0.06 -1.1,-0.86 0.18,-1.06 -0.49,0.39 -0.45,-0.52 -0.58,-1.92 -0.96,-0.3 1.62,-2.56 0.64,-2.31 -0.24,-1.94 -1.79,-1.12 -2.77,-0.16 -0.28,-0.17 -2.35,-1.96 -1.09,-3.69 -3.07,-4.99 -2.17,-5.7 -2.64,-4.47 -2.02,-2.17 -1.02,-1.98 -1.75,-0.97 -1.79,-4.21 -0.16,-1.73 -3.01,-3.32 -1.93,-1.1 -0.29,-0.81 -3.08,-3.08 -0.43,-2.1 1.01,-1.06 -0.31,-1.15 -2.3,-3.78 -2.56,-1.31 -2.59,-2.96 -0.18,-1.36 -1.79,-2.4 -0.4,-3.1 -1.48,-1.89 -0.38,-1.99 -1.02,-1.86 -0.85,-0.86 -1.85,-0.56 -0.19,-2.51 -2.49,-2 -0.65,-1.62 -3.32,-1.72 -0.19,-0.58 2.18,-0.65 -0.07,-0.59 -2,-0.36 -0.68,-0.59 -1.3,0.06 -1.7,-1.66 -0.56,0.22 -0.9,-0.6 0,0.26 0.51,0.81 -1.1,-0.65 -2.4,1.32 -2.25,-0.17 -0.53,0.41 -0.23,-0.96 1.02,-0.56 -1.66,0.11 -0.58,1.35 -0.27,-0.42 0.64,-1.12 -0.56,0.08 -0.54,0.73 -1.0199998,-0.16 0.44,1.27 -0.96,0.02 0.44,-1.68 -1.35,-0.19 0.32,-0.33 -0.44,-0.83 -0.25,0.49 -0.72,-0.3 -1.13,1.56 0.59,1.1 -0.68,0.14 -0.71,1.44 -0.78,-1.45 0.2,-1.28 -0.53,-0.22 -0.75,0.5 0.01,-0.79 1.96,-2.53 0.97,0.36 -0.42,-1.04 0.6,-0.43 0.76,-2.54 -0.34,-0.08 3.31,-8.17 1.1499998,-1.73 -0.27,-3.51 -0.7699998,-1.93 1.9199998,-5.76 0.03,-2.95 0,0 3.23,0.16 1.64,-0.61 2.49,0.78 0,0 5.25,0.69 0,0 1.92,-0.12 2.31,-2.25 0,0 3.26,-0.84 0,0 6.03,-1.09 0,0 2.35,0.22 0,0 3.31,-0.69 0,0 3.38,-0.17 0,0 2.61,0.51 z"
         title="Tab≈´k"
         id="SA-07" />
      <path
         d="m 403.89718,130.68041 -12.46,4.39 -8.25,8.72 -12.66,23.68 -9.15,12.15 -1.29,4.67 0.39,1.52 1.47,1.83 0,0 -1.3,2.23 -1.8,0.86 -1.51,-0.52 -1.94,-2.12 0,0 -1.03,-1.87 -6.08,-5.52 -1.62,-0.95 -3.28,-1.26 -9.98,-1.29 -2.44,-1.44 -2.02,-2.48 -2.78,-7.7 -5.28,-9.66 -1.08,-1.62 -1.58,-1.23 -1.57,0.21 -5.05,3.38 -2.52,0.84 -6,-3.12 -6.49,0.31 -0.96,-0.31 -1.42,-1.46 -0.88,-6.22 -0.67,-0.8 -2.68,0.47 -4.62,2.48 -3.99,0.21 -2.52,-1.46 -4.2,-5.16 -2.37,-1.99 -14.47,-3.51 -4.45,0.36 -4.76,1.35 -12.17,-3.53 -20.96,4.87 -2.37,-0.37 -4.38,-1.9 0,0 5.62,-5.69 0.89,-6.06 0.39,-9.36 1.4,-2.47 6.16,-4.72 27.27,-16.849995 5.26,-4.73 -0.1,-1.57 -7.78,-6.26 -3.13,-6.39 -2.09,-2.5 -3.6,-1.59 -5.45,0.04 -3.23,-0.65 -7.57,-6.08 -2.7,-1.26 -7.01,0.88 -17.95,-0.62 -3.7,-1.12 -3.98,-3.44 -1.78,-0.77 -4.38,-0.08 -19.01,-3.45 -8.05,0.14 -7.25,1.36 -13.58,1.49 -3.42,-0.04 -2.31,-0.62 -2.19,-1.9 -3.89,-6.96 -4.7,-3.69 -0.58,-6.72 2.84,-8.34 1.27,-6.06 0,0 35.03,-10.31 10.52,-9.1700004 -0.45,-2.01 1.16,1.54 2.33,1.41 18.56,5.42 6.07,2.8400004 3.42,2.31 88.69,62.66 66.05,45.649995 7,1.62 z"
         title="Al ·∏®ud≈´d ash ShamƒÅlƒ´yah"
         id="SA-08" />
      <path
         d="m 260.53718,593.84041 0.42,0.19 0.18,-0.09 0.34,0.26 -0.65,1.12 -0.68,-0.76 0.39,-0.72 z m -0.48,-3.22 0.36,0.53 -0.42,1.5 -0.08,-0.96 -0.49,0.77 -0.56,-1.17 0.35,-0.56 0.84,-0.11 z m -6.48,-0.49 1.42,1.06 -0.8,-0.19 -0.62,-0.87 z m -3.48,-2.47 1.93,0.5 1.13,1.63 -3.2,-1.03 -0.65,-0.76 0.79,-0.34 z m 9.66,-3.75 0.49,0.34 -1.62,0.14 1.13,-0.48 z m -9.18,-1.81 3.17,1.84 1.47,3.11 2.35,0.67 1.59,-0.36 0.99,1.34 1.6,-0.47 -0.28,-0.9 -0.44,-0.07 0.28,0.62 -0.84,0.04 -0.43,-0.61 0.52,-0.58 0.1,-1.28 0.59,0.1 0.18,-0.63 0.86,0.1 0.21,1.43 0.76,1.02 0.42,-0.08 0.59,1 0.91,-0.21 0.03,0.51 0.47,-0.06 -0.08,0.94 -0.62,0.65 0.44,2.97 -0.93,0.11 -1.24,-1.42 -1.81,-0.37 1.24,-0.6 -0.09,-1.26 -1.8,-0.44 -3.04,0.93 -1.97,-1.64 -1.14,-0.32 -1.19,-1.03 -0.96,-1.9 -1.33,-0.03 0.46,-1.25 -1,-0.81 -0.04,-1.06 z m -6.47,-0.16 2.05,3.05 -1.59,-0.6 0.21,-0.33 -0.75,-0.69 0.08,-1.43 z m 11.93,-2.08 1.14,0.78 -0.56,0.94 0.58,0.92 1.38,0.42 -0.13,0.87 -1.3,-0.32 -0.74,0.59 2.19,1.66 0.74,1.04 -0.28,0.45 -0.76,-1.15 -3.02,-1 -1.83,-2.61 0.01,-1.08 1.64,-0.2 0.94,-1.31 z m -8.03,-0.22 1.51,1.1 -0.69,1.16 -1,0.31 -0.94,-1.16 1.12,-1.41 z m 3.62,-0.86 1.13,0.65 -0.47,0.57 -0.44,-0.06 -0.22,-1.16 z m 5.16,0.24 0.42,1.41 -2.06,-2.08 1.64,0.67 z m -5.78,-47.93 4.46,-0.47 1.26,1.03 -0.82,7.27 0.28,1.5 0.74,0.47 2.95,-0.45 2.15,0.23 1.08,1.35 0.85,2.89 0.73,0.64 8.28,0.4 1.28,1.24 1.59,3.73 3.25,3.17 1.52,0.63 1.41,-0.14 0.56,-0.66 1.67,-6.75 1.21,-2.1 2.87,-2.16 2.21,-0.88 1,1.12 -0.13,4.42 3.6,1.82 2.64,4.64 0.69,0.57 2.95,0.6 1.98,3.01 0,0 0.97,1.39 -1.92,2.92 0.09,2.37 1.55,0.9 0,0.65 0.81,0.35 0.26,0.69 -4.49,1.41 0.42,1.87 -1.52,1.37 0.05,1.45 -0.62,0.32 -0.06,0.88 0.09,0.35 0.98,-0.4 1.63,0.48 0.82,1.64 -0.55,0.91 -2.27,-0.26 0.26,2.81 -1.5,0.7 -0.04,0.6 1.45,1.89 1.55,0.34 0.33,0.83 1.01,0.48 -0.22,1.26 0.48,0.86 -1.43,0.11 -0.32,0.81 0.49,2.6 -0.84,0.15 -2.07,-1.11 -0.66,0.18 0.44,0.9 -1.03,2.74 0.05,1.06 -4.42,1.16 -1.67,1.19 0.42,2.71 -1.71,0.38 -4.82,-0.49 -0.34,-0.69 0.6,-1.77 -1.21,-1.16 -0.84,-2.21 0.56,-3.56 -0.33,-0.29 -0.47,-0.6 0,-0.93 0.01,-0.57 -2.51,-3.11 -1.41,-0.69 -0.64,0.25 -0.39,-1.35 -0.51,-0.19 -0.69,-0.31 1.07,-0.96 -0.53,-1.39 0.31,-1.85 -1.37,-1.12 -2.17,-0.67 -1.33,-1.88 0.23,-1.83 -0.46,-0.18 -1.12,-0.67 -0.26,0.3 1.13,1.95 -0.66,0.66 0.05,1.98 -0.3,0.95 -0.18,-3.73 -0.98,-3.19 -0.53,-4.16 -0.56,-0.31 0.66,-2.11 -0.29,-1.63 -1.44,-0.38 -1.57,-2.47 -1.97,-1.51 -0.98,0.05 -0.2,-1.49 -0.79,-0.94 -7.32,-5.21 -0.65,-1.03 -1.45,-0.33 -1.24,-1.02 -1.05,-0.03 0.19,-0.8 -3.78,-3.48 0.69,-0.01 -1.01,-0.91 0.26,-1.07 -0.59,0.79 -0.49,-0.33 -0.12,-0.55 0.59,-0.18 -0.22,-1.01 -1.39,-0.54 -0.76,-1.79 0,0 1.97,-3.15 3.55,-2.05 0.98,-2.11 z"
         title="Jƒ´zƒÅn"
         id="SA-09" />
      <path
         d="m 399.93718,569.40041 -17.23,-2.36 -6.25,-0.42 -6.25,-4.03 -19.73,0 -1.39,0.98 -1.95,0.27 -2.64,-1.39 -2.7,0.12 -8.79,1.12 -0.82,1.52 -1.08,-1.34 -2.95,0.53 -1.37,1.92 -2.61,-0.72 -1.6,0.43 -1.97,-0.29 -0.68,-0.89 -2.02,0.36 -2.59,-2.7 0.07,-1.04 0,0 1.15,-3.24 -1.3,-5.93 0.67,-1.47 0.77,-8.37 -1.38,-6.12 0.08,-1.66 0.88,-1.69 3.08,-3.43 8.21,-7.56 1.08,-1.48 1.06,-3.02 0.95,-1.05 6.32,-2.02 2.38,-1.42 1.22,-1.41 0.97,-2.22 0.17,-2.12 -1.76,-8.57 0.69,-1.59 3.85,-1.94 1.12,-1.39 0.04,-6.08 0,0 8.51,5.59 5.22,2.39 3.24,0.72 8.85,0.7 58.85,-5.04 16.39,-2.39 10.13,-2.63 0,0 -7.99,63.49 -2.59,24.45 0,0 -7.48,4.72 -7.03,-0.36 -8.18,-11.04 -10.7,1.53 z"
         title="NajrƒÅn"
         id="SA-10" />
      <path
         d="m 260.01718,447.12041 -2.15,6.42 0.23,0.79 2.05,1.97 0.11,1.59 -1.04,1.45 -5.82,3.97 -0.84,1.79 0.23,3.55 -4.26,8.69 0,0 -0.79,0.51 -4.62,0.04 -1.52,0.58 -2.4,4.46 -2.58,8.99 -2.21,1.08 -2.58,0 -1.59,-1.05 -2.06,-3.06 -3.68,-2.13 -1.3,-1.54 0.26,-4.43 -0.91,-3.89 0.31,-5.29 -0.97,-1.52 -3.65,-1.1 -0.67,-0.7 -0.18,-1.41 4.01,-4.1 7.73,-1.86 1.37,-3.56 2.69,-4.63 0.12,-2.35 -1.11,-4.55 0.7,-2.11 1.36,-1.42 2.26,-0.31 1.43,0.61 1.21,1.45 1.28,3.78 1.92,1.46 4.61,-1.77 4.17,0.2 5.41,-2.75 1.49,0.22 z"
         title="Al BƒÅ·∏©ah"
         id="SA-11" />
      <path
         d="m 13.437176,126.05041 0.66,-2.82 0.74,-0.76 -0.18,-0.82 1.04,-0.61 -0.48,-1.92 0.81,-0.46 -0.24,-0.86 0.61,-1.36 38.21,6.79 14.65,-12.07 8.85,-14.779995 25.760004,-5.16 5.78,-13.18 11.32,-6.78 -34.260004,-39.72 33.690004,-9.9 0,0 -1.27,6.06 -2.84,8.34 0.58,6.72 4.7,3.69 3.89,6.96 2.19,1.9 2.31,0.62 3.42,0.04 13.58,-1.49 7.25,-1.36 8.05,-0.14 19.01,3.45 4.38,0.08 1.78,0.77 3.98,3.44 3.7,1.12 17.95,0.62 7.01,-0.88 2.7,1.26 7.57,6.08 3.23,0.65 5.45,-0.04 3.6,1.59 2.09,2.5 3.13,6.39 7.78,6.26 0.1,1.57 -5.26,4.73 -27.27,16.849995 -6.16,4.72 -1.4,2.47 -0.39,9.36 -0.89,6.06 -5.62,5.69 0,0 -3.04,-0.66 -12.9,5.53 -13.07,7.6 -4.29,0.69 -9.93,4.38 -6.27,3.54 -3.69,4.2 0,0 -1.41,-1.21 -1.63,-0.49 -3.39,1 0,0 -3.56,1.88 -1.73,0.08 0,0 -1.3,-1.08 -0.78,-2.47 -0.75,-0.21 0,0 -1.64,0.32 0,0 -0.77,-0.47 0,0 -1.54,-1.26 0,0 -0.8,0.04 -2.4,1.75 0,0 -10.13,-1.18 0,0 -3.32,-1.1 0,0 -2.42,-1.21 -3.47,-3.55 0,0 -0.75,-1.63 0,0 -0.57,-2.65 0,0 -0.31,-4.39 0.45,-7.19 0,0 -0.46,-1.64 0,0 -1.57,-0.94 -0.77,0.41 0,0 -2.87,2.88 0,0 -1.58,0.72 0,0 -1.26,1.47 0,0 -2.58,6.06 0,0 -1.57,0.57 0,0 -8.550004,-0.71 -4.62,-1.8 -5.16,-0.72 0,0 -4.47,0.84 0,0 -4.39,1.03 -3.28,1.37 0,0 -1.81,0.33 -1.72,-0.64 0,0 -6.23,-8.13 0,0 -1.17,-1.64 0,0 -1.99,-2.37 -2.51,-1.93 0,0 -5.08,-1.54 0,0 -2.61,-0.51 0,0 -3.38,0.17 0,0 -3.31,0.69 0,0 -2.35,-0.22 0,0 -6.03,1.09 0,0 -3.27,0.83 0,0 -2.3,2.26 -1.93,0.12 0,0 -5.24,-0.69 0,0 -2.49,-0.78 -1.64,0.61 -3.23,-0.16 0,0 0.39,-2.96 0.64,-1.27 -0.41,-1.66 0.82,-1.35 z"
         title="Al Jawf"
         id="SA-12" />
      <path
         d="m 303.24718,558.19041 -1.98,-3.01 -2.95,-0.6 -0.68,-0.57 -2.65,-4.63 -3.6,-1.82 0.14,-4.42 -1,-1.12 -2.21,0.88 -2.87,2.16 -1.21,2.1 -1.66,6.75 -0.57,0.66 -1.4,0.14 -1.52,-0.63 -3.25,-3.16 -1.59,-3.73 -1.28,-1.24 -8.28,-0.4 -0.73,-0.64 -0.85,-2.89 -1.08,-1.35 -2.16,-0.23 -2.94,0.45 -0.74,-0.47 -0.28,-1.5 0.83,-7.27 -1.27,-1.03 -4.46,0.47 0,0 1.5,-6.41 -2.97,-9.14 -2.11,-1.2 -6.71,-0.21 -1.43,-0.49 -1.03,-1.47 -0.61,-2.97 0.49,-10 1.97,1.88 0.75,-0.06 3.87,-2.82 2.24,-0.38 4.74,0.44 1.52,-0.75 0.76,-1.42 1.27,-4.6 -2.19,-4.44 1.31,-6.92 -0.21,-1.51 -1.85,-1.89 -2.29,-0.13 -1.5,0.74 0,0 4.26,-8.69 -0.23,-3.55 0.84,-1.79 5.82,-3.97 1.04,-1.45 -0.11,-1.59 -2.05,-1.97 -0.23,-0.79 2.15,-6.42 0,0 4.67,9.08 1.4,1.02 2.28,0.24 2.31,-1.13 10.11,-9.25 6.41,-3.06 4.26,-3.8 4.55,-0.28 3.16,-1.52 2.26,-0.24 5.21,1.3 5.72,-3.77 4.02,-1.46 0,0 5.76,5.01 3.07,4.93 3.6,3.6 1.06,1.73 -0.08,2.96 -3.34,6.09 -1.23,6.11 0.22,1.6 2.75,2.96 3.91,6.36 13.54,12.09 0,0 -0.04,6.08 -1.12,1.39 -3.85,1.94 -0.69,1.59 1.76,8.57 -0.17,2.12 -0.97,2.22 -1.22,1.41 -2.38,1.42 -6.32,2.02 -0.95,1.05 -1.06,3.02 -1.08,1.48 -8.21,7.56 -3.08,3.43 -0.88,1.69 -0.08,1.66 1.38,6.12 -0.77,8.37 -0.67,1.47 1.3,5.93 -1.15,3.24 0,0 -0.11,1.8 -2.37,-2.3 -5.29,-3.37 -2.46,-0.34 z"
         title="'Asir"
         id="SA-14" />
        </svg>
        
        <!-- INLINE SVG END -->
      </div>
    </section>

    <aside class="region-panel" id="regionPanel" aria-labelledby="regionPanelTitle" aria-hidden="true">
      <div class="region-panel__header">
        <div class="region-panel__controls">
          <button type="button" class="region-panel__nav region-panel__nav--prev" id="regionPanelPrev" aria-label="ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©">
            <span aria-hidden="true">‚Äπ</span>
          </button>
          <div class="region-panel__title-group">
            <h2 class="region-panel__title" id="regionPanelTitle"></h2>
            <p class="region-panel__meta" id="regionPanelMeta"></p>
          </div>
          <button type="button" class="region-panel__nav region-panel__nav--next" id="regionPanelNext" aria-label="ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©">
            <span aria-hidden="true">‚Ä∫</span>
          </button>
        </div>
        <button type="button" class="region-panel__close" id="regionPanelClose" aria-label="ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÑŸàÿ≠ÿ©">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="region-panel__body" id="regionPanelBody" tabindex="-1">
        <p class="region-panel__placeholder">ÿßÿÆÿ™ÿ± ŸÖŸÜÿ∑ŸÇÿ© ŸÖŸÜ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ© ŸÑÿπÿ±ÿ∂ ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ.</p>
      </div>
    </aside>
  </div>

  <div class="region-panel-backdrop" id="regionPanelBackdrop" hidden></div>

  <!-- Bootstrap Bundle (includes Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
          crossorigin="anonymous"></script>

  <!-- Consolidated Application Script (Embedded) -->
  <script>
/**
 * Employee Map Application - Consolidated JavaScript
 * All functionality combined into a single file
 */

/* ========================================================================
   Employee Regions Data
   ======================================================================== */

// This constant is now embedded here (was in js/regions-data.js)
const regionsData = {
  "regions": {
    "SA-01": {
      "id": "SA-01",
      "name": "ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ±Ÿäÿßÿ∂",
      "nameEn": "Riyadh Region",
      "employees": []
    },
    "SA-02": {
      "id": "SA-02",
      "name": "ŸÖŸÜÿ∑ŸÇÿ© ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©",
      "nameEn": "Makkah Region",
      "employees": [
        {
          "id": "emp001",
          "name": "ÿÆÿßŸÑÿØ ÿßŸÑÿ≤Ÿáÿ±ÿßŸÜŸä",
          "nameEn": "Khalid Al Zahrani",
          "position": "ŸÖÿ≥ÿ™ÿ¥ÿßÿ±",
          "positionEn": "Consultant",
          "startDate": "2025-04-06",
          "images": ["images/placeholder-avatar.svg"],
          "cv": ""
        },
        {
          "id": "emp002",
          "name": "ÿ£ÿ≠ŸÖÿØ ÿßŸÑÿ≠ÿ±ÿ®Ÿä",
          "nameEn": "Ahmad Al Harbi",
          "position": "ŸÖŸáŸÜÿØÿ≥ ÿÆÿ®Ÿäÿ±",
          "positionEn": "Senior Engineer",
          "startDate": "2025-01-05",
          "images": ["images/placeholder-avatar.svg"],
          "cv": ""
        }
      ]
    },
    "SA-03": {
      "id": "SA-03",
      "name": "ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©",
      "nameEn": "Al Madinah",
      "employees": [
        {
          "id": "emp011",
          "name": "ÿπÿ®ÿØÿßŸÑŸÑŸá ÿßŸÑÿ≥ÿ≠ŸäŸÖŸä",
          "nameEn": "Abdullah Al Saihmi",
          "position": "ŸÉÿ®Ÿäÿ± ŸÖŸáŸÜÿØÿ≥ŸäŸÜ",
          "positionEn": "Chief Engineer",
          "startDate": "2025-06-29",
          "images": ["images/placeholder-avatar.svg"],
          "cv": ""
        },
        {
          "id": "emp012",
          "name": "ÿπÿ®ÿØÿßŸÑÿ±ÿ≠ŸÖŸÜ ÿßŸÑÿ≠ŸäÿØÿ±Ÿä",
          "nameEn": "Abdulrahman Al Haidari",
          "position": "ŸÖŸáŸÜÿØÿ≥ ÿÆÿ®Ÿäÿ±",
          "positionEn": "Senior Engineer",
          "startDate": "2025-06-29",
          "images": ["images/abdulrahman_alhaidari.png"],
          "cv": ""
        }
      ]
    },
    "SA-04": {
      "id": "SA-04",
      "name": "ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ¥ÿ±ŸÇŸäÿ©",
      "nameEn": "Eastern Province",
      "employees": [
        {
          "id": "emp004",
          "name": "ŸÖÿ≠ŸÖÿØ ÿßŸÑÿ∫ÿßŸÖÿØŸä",
          "nameEn": "Muhammad Al Ghamdi",
          "position": "ŸÖŸáŸÜÿØÿ≥ ÿÆÿ®Ÿäÿ±",
          "positionEn": "Senior Engineer",
          "startDate": "2025-01-01",
          "images": ["images/placeholder-avatar.svg"],
          "cv": ""
        }
      ]
    },
    "SA-05": {
      "id": "SA-05",
      "name": "ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑŸÇÿµŸäŸÖ",
      "nameEn": "Al Qassim Region",
      "employees": [
        {
          "id": "emp007",
          "name": "ÿπÿØŸÜÿßŸÜ ÿßŸÑŸÖÿ∑Ÿàÿπ",
          "nameEn": "Adnan Al Mutawa",
          "position": "ŸÉÿ®Ÿäÿ± ŸÖŸáŸÜÿØÿ≥ŸäŸÜ",
          "positionEn": "Chief Engineer",
          "startDate": "2024-10-20",
          "images": ["images/adnan_almutawa.jpg"],
          "cv": ""
        },
        {
          "id": "emp008",
          "name": "ÿπÿ®ÿØÿßŸÑŸÑŸá ÿßŸÑÿ≥ÿ®ŸäÿπŸä",
          "nameEn": "Abdullah Al Subai",
          "position": "ŸÖŸáŸÜÿØÿ≥ ÿÆÿ®Ÿäÿ±",
          "positionEn": "Senior Engineer",
          "startDate": "2025-03-02",
          "images": ["images/abdullah_alsubaie.jpg"],
          "cv": ""
        }
      ]
    },
    "SA-06": {
      "id": "SA-06",
      "name": "ŸÖŸÜÿ∑ŸÇÿ© ÿ≠ÿßÿ¶ŸÑ",
      "nameEn": "Hail Region",
      "employees": [
        {
          "id": "emp018",
          "name": "ÿ≥ŸÑÿ∑ÿßŸÜ ÿßŸÑÿ¥ŸÖÿ±Ÿä",
          "nameEn": "Sultan Al Shammari",
          "position": "ŸÉÿ®Ÿäÿ± ŸÖŸáŸÜÿØÿ≥ŸäŸÜ",
          "positionEn": "Chief Engineer",
          "startDate": "2025-05-04",
          "images": ["images/sultan_alsahmmari.jpg"],
          "cv": ""
        }
      ]
    },
    "SA-07": {
      "id": "SA-07",
      "name": "ŸÖŸÜÿ∑ŸÇÿ© ÿ™ÿ®ŸàŸÉ",
      "nameEn": "Tabuk Region",
      "employees": [
        {
          "id": "emp005",
          "name": "ÿ∂ŸäŸÅ ÿßŸÑŸÑŸá ÿßŸÑÿπŸÖÿ±ÿßŸÜŸä",
          "nameEn": "Dhaifallah Al Omrani",
          "position": "ŸÉÿ®Ÿäÿ± ŸÖŸáŸÜÿØÿ≥ŸäŸÜ",
          "positionEn": "Chief Engineer",
          "startDate": "2025-06-22",
          "images": ["images/daifallah_alomrani.jpg"],
          "cv": ""
        },
        {
          "id": "emp006",
          "name": "ÿ≥ŸÑŸÖÿßŸÜ ÿßŸÑÿ®ŸÑŸàŸä",
          "nameEn": "Salman Al Balawi",
          "position": "ŸÖŸáŸÜÿØÿ≥ ÿÆÿ®Ÿäÿ±",
          "positionEn": "Senior Engineer",
          "startDate": "2025-05-12",
          "images": ["images/salman_albalawi.jpg"],
          "cv": ""
        }
      ]
    },
    "SA-08": {
      "id": "SA-08",
      "name": "ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ≠ÿØŸàÿØ ÿßŸÑÿ¥ŸÖÿßŸÑŸäÿ©",
      "nameEn": "Northern Borders Region",
      "employees": [
        {
          "id": "emp016",
          "name": "ÿπÿ®ÿØÿßŸÑÿ±ÿ≠ŸÖŸÜ ÿßŸÑÿ±ÿ®ÿßÿπŸä",
          "nameEn": "Abdulrahman Al Rubai",
          "position": "ŸÉÿ®Ÿäÿ± ŸÖŸáŸÜÿØÿ≥ŸäŸÜ",
          "positionEn": "Chief Engineer",
          "startDate": "2025-05-04",
          "images": ["images/placeholder-avatar.svg"],
          "cv": ""
        }
      ]
    },
    "SA-09": {
      "id": "SA-09",
      "name": "ŸÖŸÜÿ∑ŸÇÿ© ÿ¨ÿßÿ≤ÿßŸÜ",
      "nameEn": "Jazan Region",
      "employees": [
        {
          "id": "emp013",
          "name": "ÿ≠ÿ≥ŸäŸÜ ÿπÿ™ŸàÿØŸä",
          "nameEn": "Hussein Atoudi",
          "position": "ŸÉÿ®Ÿäÿ± ŸÖŸáŸÜÿØÿ≥ŸäŸÜ",
          "positionEn": "Chief Engineer",
          "startDate": "2025-04-20",
          "images": ["images/placeholder-avatar.svg"],
          "cv": ""
        },
        {
          "id": "emp014",
          "name": "ŸÖÿ≠ŸÖÿØ ŸÜÿ¨ŸÖŸä",
          "nameEn": "Muhammad Najmi",
          "position": "ŸÖŸáŸÜÿØÿ≥ ŸÖÿ≠ÿ™ÿ±ŸÅ",
          "positionEn": "Professional Engineer",
          "startDate": "2025-03-02",
          "images": ["images/mohammed_najmi.jpeg"],
          "cv": ""
        }
      ]
    },
    "SA-10": {
      "id": "SA-10",
      "name": "ŸÖŸÜÿ∑ŸÇÿ© ŸÜÿ¨ÿ±ÿßŸÜ",
      "nameEn": "Najran Region",
      "employees": [
        {
          "id": "emp019",
          "name": "ÿ≥ŸÑÿ∑ÿßŸÜ ÿßŸÑŸÇÿ≠ÿ∑ÿßŸÜŸä",
          "nameEn": "Sultan Al Qahtani",
          "position": "ŸÉÿ®Ÿäÿ± ŸÖŸáŸÜÿØÿ≥ŸäŸÜ",
          "positionEn": "Chief Engineer",
          "startDate": "2025-05-18",
          "images": ["images/sultan_alqahtani.jpg"],
          "cv": ""
        }
      ]
    },
    "SA-11": {
      "id": "SA-11",
      "name": "ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ®ÿßÿ≠ÿ©",
      "nameEn": "Al Bahah Region",
      "employees": [
        {
          "id": "emp017",
          "name": "ŸÅŸäÿµŸÑ ÿßŸÑÿ∫ÿßŸÖÿØŸä",
          "nameEn": "Faisal Al Ghamdi",
          "position": "ŸÉÿ®Ÿäÿ± ŸÖŸáŸÜÿØÿ≥ŸäŸÜ",
          "positionEn": "Chief Engineer",
          "startDate": "2025-06-22",
          "images": ["images/placeholder-avatar.svg"],
          "cv": ""
        }
      ]
    },
    "SA-12": {
      "id": "SA-12",
      "name": "ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ¨ŸàŸÅ",
      "nameEn": "Al Jouf Region",
      "employees": [
        {
          "id": "emp015",
          "name": "ÿπÿ®ÿØÿßŸÑŸÑŸá ÿßŸÑŸÜÿµÿ±",
          "nameEn": "Abdullah Al Nasser",
          "position": "ŸÉÿ®Ÿäÿ± ŸÖŸáŸÜÿØÿ≥ŸäŸÜ",
          "positionEn": "Chief Engineer",
          "startDate": "2025-06-22",
          "images": ["images/abdullah_alnaser.jpeg"],
          "cv": ""
        }
      ]
    },
    "SA-14": {
      "id": "SA-14",
      "name": "ŸÖŸÜÿ∑ŸÇÿ© ÿπÿ≥Ÿäÿ±",
      "nameEn": "Asir Region",
      "employees": [
        {
          "id": "emp009",
          "name": "ÿ≥ÿπŸäÿØ ÿßŸÑŸÇÿßÿ∂Ÿä",
          "nameEn": "Saeed Al Qadi",
          "position": "ŸÖŸáŸÜÿØÿ≥ ÿÆÿ®Ÿäÿ±",
          "positionEn": "Senior Engineer",
          "startDate": "2025-06-29",
          "images": ["images/saeed_alqadi.jpg"],
          "cv": ""
        },
        {
          "id": "emp010",
          "name": "ÿÆÿßŸÑÿØ ÿßŸÑŸÇÿ≠ÿ∑ÿßŸÜŸä",
          "nameEn": "Khalid Al Qahtani",
          "position": "ŸÖŸáŸÜÿØÿ≥ ŸÖÿ≠ÿ™ÿ±ŸÅ",
          "positionEn": "Professional Engineer",
          "startDate": "2025-05-18",
          "images": ["images/khalid_alqahtani.jpg"],
          "cv": ""
        }
      ]
    }
  },
  "metadata": {
    "lastUpdated": "2025-10-29",
    "version": "1.0.0",
    "totalEmployees": 19,
    "totalRegions": 12
  }
};

/* ========================================================================
   Error Handling Module
   ======================================================================== */

class ImageHandler {
  static handleImageError(imgElement, employeeName) {
    imgElement.dataset.originalSrc = imgElement.src;
    imgElement.src = 'images/placeholder-avatar.svg';
    imgElement.alt = `ÿµŸàÿ±ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ© - ${employeeName}`;
    imgElement.classList.add('placeholder-image');
    console.warn(`Failed to load image: ${imgElement.dataset.originalSrc}`);
  }

  static preloadImage(src) {
    return new Promise((resolve, reject) => {
      const img = new Image();
      img.onload = () => resolve(src);
      img.onerror = () => reject(new Error(`Failed to load: ${src}`));
      img.src = src;
    });
  }

  static async loadEmployeeImages(employee) {
    const imagePromises = employee.images.map(src =>
      this.preloadImage(src).catch(() => {
        console.warn(`Image not found: ${src}, using placeholder`);
        return 'images/placeholder-avatar.svg';
      })
    );
    return await Promise.all(imagePromises);
  }

  static setupAutoErrorHandling() {
    document.addEventListener('error', (e) => {
      if (e.target.tagName === 'IMG') {
        const img = e.target;
        if (!img.classList.contains('error-handled')) {
          img.classList.add('error-handled');
          this.handleImageError(img, img.alt || 'Unknown');
        }
      }
    }, true);
  }
}

class DataValidator {
  static validateRegion(region, regionId) {
    const errors = [];
    if (!region.id && !regionId) errors.push('Region ID is missing');
    if (!region.name) errors.push('Region name is missing');
    if (!region.employees) errors.push('Region employees array is missing');
    if (region.employees && !Array.isArray(region.employees)) {
      errors.push('Region employees must be an array');
    }
    if (errors.length > 0) {
      throw new Error(`Region validation failed for ${regionId}: ${errors.join(', ')}`);
    }
    return true;
  }

  static validateEmployee(employee, index) {
    const errors = [];
    if (!employee.name) errors.push('Employee name is missing');
    if (!employee.position) errors.push('Employee position is missing');
    if (!employee.startDate) errors.push('Employee start date is missing');
    if (employee.images && !Array.isArray(employee.images)) {
      errors.push('Employee images must be an array');
    }
    if (employee.images && employee.images.length === 0) {
      console.warn(`Employee ${employee.name} has no images`);
    }
    if (!employee.cv) {
      console.warn(`Employee ${employee.name} has no CV`);
    }
    if (errors.length > 0) {
      console.error(`Employee validation failed at index ${index}:`, errors);
      return false;
    }
    return true;
  }

  static validateData(data) {
    if (!data) throw new Error('Data is null or undefined');
    if (!data.regions) throw new Error('Data is missing "regions" property');
    if (typeof data.regions !== 'object') {
      throw new Error('Data "regions" must be an object');
    }

    if (!data.metadata) {
      console.warn('Data is missing metadata');
    } else {
      if (!data.metadata.version) console.warn('Data metadata missing version');
      if (!data.metadata.lastUpdated) console.warn('Data metadata missing lastUpdated');
    }

    let totalEmployees = 0;
    const regionCount = Object.keys(data.regions).length;

    Object.entries(data.regions).forEach(([regionId, region]) => {
      try {
        this.validateRegion(region, regionId);
        region.employees.forEach((emp, index) => {
          this.validateEmployee(emp, index);
        });
        totalEmployees += region.employees.length;
      } catch (error) {
        console.error(`Validation error for region ${regionId}:`, error);
      }
    });

    if (data.metadata) {
      if (data.metadata.totalEmployees !== totalEmployees) {
        console.warn(
          `Employee count mismatch: metadata says ${data.metadata.totalEmployees}, found ${totalEmployees}`
        );
      }
      if (data.metadata.totalRegions !== regionCount) {
        console.warn(
          `Region count mismatch: metadata says ${data.metadata.totalRegions}, found ${regionCount}`
        );
      }
    }

    return true;
  }
}

class ErrorHandler {
  static showError(message, type = 'warning') {
    const toastHTML = `
      <div class="toast align-items-center text-white bg-${type === 'error' ? 'danger' : 'warning'} border-0"
           role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
          <div class="toast-body">
            ${this.escapeHtml(message)}
          </div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto"
                  data-bs-dismiss="toast" aria-label="ÿ•ÿ∫ŸÑÿßŸÇ"></button>
        </div>
      </div>
    `;

    const container = document.getElementById('toast-container') || this.createToastContainer();
    container.insertAdjacentHTML('beforeend', toastHTML);

    const toastElement = container.lastElementChild;
    const toast = new bootstrap.Toast(toastElement, {
      autohide: true,
      delay: type === 'error' ? 5000 : 3000
    });
    toast.show();

    toastElement.addEventListener('hidden.bs.toast', () => {
      toastElement.remove();
    });
  }

  static createToastContainer() {
    const container = document.createElement('div');
    container.id = 'toast-container';
    container.className = 'toast-container position-fixed top-0 end-0 p-3';
    container.setAttribute('style', 'z-index: 9999');
    document.body.appendChild(container);
    return container;
  }

  static escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }

  static showLoading(message = 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...') {
    const loadingHTML = `
      <div id="global-loading" class="loading-overlay">
        <div class="spinner-container">
          <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
            <span class="visually-hidden">${this.escapeHtml(message)}</span>
          </div>
          <p class="mt-3">${this.escapeHtml(message)}</p>
        </div>
      </div>
    `;
    this.hideLoading();
    document.body.insertAdjacentHTML('beforeend', loadingHTML);
  }

  static hideLoading() {
    const loader = document.getElementById('global-loading');
    if (loader) loader.remove();
  }

  static handleNetworkError(error) {
    console.error('Network error:', error);
    let message = 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ';
    if (!navigator.onLine) {
      message = 'ŸÑÿß ŸäŸàÿ¨ÿØ ÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿßÿ™ÿµÿßŸÑ.';
    } else if (error.message.includes('404')) {
      message = 'ÿßŸÑŸÖŸÑŸÅ ÿßŸÑŸÖÿ∑ŸÑŸàÿ® ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ';
    } else if (error.message.includes('500')) {
      message = 'ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿÆÿßÿØŸÖ. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÑÿßÿ≠ŸÇÿßŸã';
    }
    this.showError(message, 'error');
  }

  static handleValidationError(error) {
    console.error('Validation error:', error);
    this.showError('ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÖŸÑÿ© ÿ™ÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ÿ£ÿÆÿ∑ÿßÿ°', 'error');
  }

  static logError(context, error, additionalInfo = {}) {
    const errorLog = {
      timestamp: new Date().toISOString(),
      context,
      error: {
        message: error.message,
        stack: error.stack,
        name: error.name
      },
      ...additionalInfo,
      userAgent: navigator.userAgent,
      url: window.location.href
    };
    console.error('Error logged:', errorLog);
  }
}

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => {
    ImageHandler.setupAutoErrorHandling();
  });
} else {
  ImageHandler.setupAutoErrorHandling();
}

/* ========================================================================
   Accessibility Module
   ======================================================================== */

class AccessibilityManager {
  constructor() {
    this.focusableElements = [];
    this.lastFocusedElement = null;
    this.announcer = null;
  }

  init() {
    console.log('Initializing accessibility features...');
    this.createSkipLinks();
    this.createLiveRegion();
    this.setupKeyboardNavigation();
    this.enhanceFocusManagement();
    this.makeTooltipsAccessible();
    console.log('Accessibility features initialized');
  }

  createSkipLinks() {
    const skipLinks = document.createElement('div');
    skipLinks.className = 'skip-links';
    skipLinks.innerHTML = `
      <a href="#map-container" class="skip-link">ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©</a>
      <a href="#main-content" class="skip-link">ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä</a>
    `;
    document.body.insertBefore(skipLinks, document.body.firstChild);

    const mapContainer = document.getElementById('map-container');
    if (mapContainer) {
      mapContainer.setAttribute('role', 'application');
      mapContainer.setAttribute('aria-label', 'ÿÆÿ±Ÿäÿ∑ÿ© ÿßŸÑÿ≥ÿπŸàÿØŸäÿ© ÿßŸÑÿ™ŸÅÿßÿπŸÑŸäÿ©');
    }
  }

  createLiveRegion() {
    this.announcer = document.createElement('div');
    this.announcer.className = 'sr-only';
    this.announcer.setAttribute('role', 'status');
    this.announcer.setAttribute('aria-live', 'polite');
    this.announcer.setAttribute('aria-atomic', 'true');
    document.body.appendChild(this.announcer);
  }

  announce(message, priority = 'polite') {
    if (!this.announcer) return;
    this.announcer.textContent = '';
    this.announcer.setAttribute('aria-live', priority);
    setTimeout(() => {
      this.announcer.textContent = message;
    }, 100);
  }

  setupKeyboardNavigation() {
    const svg = document.querySelector('#map-container svg');
    if (!svg) return;

    svg.setAttribute('role', 'img');
    svg.setAttribute('aria-label', 'ÿÆÿ±Ÿäÿ∑ÿ© ÿßŸÑÿ≥ÿπŸàÿØŸäÿ© ÿßŸÑÿ™ŸÅÿßÿπŸÑŸäÿ© ÿ™ÿ≠ÿ™ŸàŸä ÿπŸÑŸâ 13 ŸÖŸÜÿ∑ŸÇÿ© ŸÇÿßÿ®ŸÑÿ© ŸÑŸÑŸÜŸÇÿ±');

    const paths = svg.querySelectorAll('path');
    paths.forEach((path) => {
      path.setAttribute('tabindex', '0');
      path.setAttribute('role', 'button');
      const regionName = path.getAttribute('title');
      path.setAttribute('aria-label', `ŸÖŸÜÿ∑ŸÇÿ© ${regionName}ÿå ÿßÿ∂ÿ∫ÿ∑ Enter ŸÑŸÑÿπÿ±ÿ∂`);
      path.addEventListener('keydown', (e) => {
        this.handlePathKeydown(e, path);
      });
      this.focusableElements.push(path);
    });

    svg.addEventListener('keydown', (e) => {
      this.handleArrowNavigation(e);
    });
  }

  handlePathKeydown(e, path) {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      path.click();
      const regionName = path.getAttribute('title');
      this.announce(`ŸÅÿ™ÿ≠ ŸÖŸÜÿ∑ŸÇÿ© ${regionName}`);
    }
  }

  handleArrowNavigation(e) {
    const currentElement = document.activeElement;
    const currentIndex = this.focusableElements.indexOf(currentElement);

    if (currentIndex === -1) return;

    let nextIndex;
    switch(e.key) {
      case 'ArrowRight':
      case 'ArrowDown':
        e.preventDefault();
        nextIndex = (currentIndex + 1) % this.focusableElements.length;
        this.focusableElements[nextIndex].focus();
        break;
      case 'ArrowLeft':
      case 'ArrowUp':
        e.preventDefault();
        nextIndex = currentIndex - 1;
        if (nextIndex < 0) nextIndex = this.focusableElements.length - 1;
        this.focusableElements[nextIndex].focus();
        break;
      case 'Home':
        e.preventDefault();
        this.focusableElements[0].focus();
        break;
      case 'End':
        e.preventDefault();
        this.focusableElements[this.focusableElements.length - 1].focus();
        break;
    }
  }

  enhanceFocusManagement() {
    const regionModal = document.getElementById('regionModal');

    if (regionModal) this.setupModalFocusTrap(regionModal);
  }

  setupModalFocusTrap(modalElement) {
    modalElement.addEventListener('shown.bs.modal', () => {
      this.lastFocusedElement = document.activeElement;

      const focusableElements = modalElement.querySelectorAll(
        'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
      );

      if (focusableElements.length === 0) return;

      const firstElement = focusableElements[0];
      const lastElement = focusableElements[focusableElements.length - 1];

      firstElement.focus();

      modalElement.addEventListener('keydown', (e) => {
        if (e.key !== 'Tab') return;

        if (e.shiftKey) {
          if (document.activeElement === firstElement) {
            e.preventDefault();
            lastElement.focus();
          }
        } else {
          if (document.activeElement === lastElement) {
            e.preventDefault();
            firstElement.focus();
          }
        }
      });

      const modalTitle = modalElement.querySelector('.modal-title');
      if (modalTitle) {
        this.announce(`ŸÜÿßŸÅÿ∞ÿ© ŸÖŸÜÿ®ÿ´ŸÇÿ©: ${modalTitle.textContent}`);
      }
    });

    modalElement.addEventListener('hidden.bs.modal', () => {
      if (this.lastFocusedElement) {
        this.lastFocusedElement.focus();
      }
      this.announce('ÿ™ŸÖ ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÜÿßŸÅÿ∞ÿ© ÿßŸÑŸÖŸÜÿ®ÿ´ŸÇÿ©');
    });
  }

  makeTooltipsAccessible() {
    const tooltip = document.getElementById('tooltip');
    if (!tooltip) return;
    tooltip.setAttribute('role', 'tooltip');
    tooltip.setAttribute('aria-live', 'polite');
    tooltip.setAttribute('aria-atomic', 'true');
  }

  enhanceTableAccessibility(table) {
    table.setAttribute('role', 'table');
    table.setAttribute('aria-label', 'ÿ¨ÿØŸàŸÑ ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ');

    const thead = table.querySelector('thead');
    if (thead) {
      thead.setAttribute('role', 'rowgroup');
      const headerRow = thead.querySelector('tr');
      if (headerRow) {
        headerRow.setAttribute('role', 'row');
        headerRow.querySelectorAll('th').forEach(th => {
          th.setAttribute('role', 'columnheader');
          th.setAttribute('scope', 'col');
        });
      }
    }

    const tbody = table.querySelector('tbody');
    if (tbody) {
      tbody.setAttribute('role', 'rowgroup');
      tbody.querySelectorAll('tr').forEach(tr => {
        tr.setAttribute('role', 'row');
        tr.querySelectorAll('td').forEach(td => {
          td.setAttribute('role', 'cell');
        });
      });
    }

    const rowCount = tbody ? tbody.querySelectorAll('tr').length : 0;
    this.announce(`ÿ¨ÿØŸàŸÑ Ÿäÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ${rowCount} ŸÖŸàÿ∏ŸÅ`);
  }

  enhanceCarouselAccessibility(carousel) {
    carousel.setAttribute('role', 'region');
    carousel.setAttribute('aria-label', 'ŸÖÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ±');
    carousel.setAttribute('aria-roledescription', 'carousel');

    const carouselInner = carousel.querySelector('.carousel-inner');
    if (carouselInner) {
      carouselInner.setAttribute('role', 'group');
      carouselInner.setAttribute('aria-live', 'polite');
    }

    const prevButton = carousel.querySelector('.carousel-control-prev');
    const nextButton = carousel.querySelector('.carousel-control-next');

    if (prevButton) prevButton.setAttribute('aria-label', 'ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©');
    if (nextButton) nextButton.setAttribute('aria-label', 'ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©');

    const items = carousel.querySelectorAll('.carousel-item');
    items.forEach((item, index) => {
      item.setAttribute('role', 'group');
      item.setAttribute('aria-roledescription', 'slide');
      item.setAttribute('aria-label', `ÿµŸàÿ±ÿ© ${index + 1} ŸÖŸÜ ${items.length}`);
    });
  }

  prefersReducedMotion() {
    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  }

  announceLoading(message = 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ') {
    this.announce(message, 'assertive');
  }

  announceLoaded(message = 'ÿßŸÉÿ™ŸÖŸÑ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ') {
    this.announce(message, 'polite');
  }

  announceError(message) {
    this.announce(`ÿÆÿ∑ÿ£: ${message}`, 'assertive');
  }
}

window.AccessibilityManager = new AccessibilityManager();

/* ========================================================================
   Mobile Optimization Module
   ======================================================================== */

class MobileOptimizer {
  constructor() {
    this.isMobile = false;
    this.isTablet = false;
    this.touchStartX = 0;
    this.touchStartY = 0;
    this.touchEndX = 0;
    this.touchEndY = 0;
    this.isZooming = false;
    this.lastTouchTime = 0;
    this.doubleTapDelay = 300;
  }

  init() {
    console.log('Initializing mobile optimizations...');
    this.detectDevice();
    this.fixMapSVGForMobile();
    this.setupTouchSupport();
    this.optimizeViewport();
    this.preventDoubleTapZoom();
    this.optimizeModalsForMobile();
    this.setupSwipeGestures();
    this.handleOrientationChange();
    console.log(`Device: ${this.isMobile ? 'Mobile' : this.isTablet ? 'Tablet' : 'Desktop'}`);
  }

  fixMapSVGForMobile() {
    if (!this.isMobile && !this.isTablet) return;

    const svg = document.querySelector('.map-container svg');
    if (!svg) return;

    svg.removeAttribute('width');
    svg.removeAttribute('height');

    if (!svg.getAttribute('viewBox')) {
      svg.setAttribute('viewBox', '0 0 730.13947 600.4032');
    }

    svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
    console.log('SVG map optimized for mobile');
  }

  detectDevice() {
    const width = window.innerWidth;
    const userAgent = navigator.userAgent.toLowerCase();

    this.isMobile = width <= 768 || /mobile|android|iphone|ipod|blackberry|iemobile|opera mini/i.test(userAgent);
    this.isTablet = (width > 768 && width <= 1024) || /ipad|tablet|playbook|silk/i.test(userAgent);

    document.body.classList.toggle('is-mobile', this.isMobile);
    document.body.classList.toggle('is-tablet', this.isTablet);
    document.body.classList.toggle('is-desktop', !this.isMobile && !this.isTablet);
  }

  setupTouchSupport() {
    if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
      document.body.classList.add('touch-enabled');
    }

    const mapContainer = document.getElementById('map-container');
    if (!mapContainer) return;

    mapContainer.addEventListener('touchstart', (e) => {
      this.handleTouchStart(e);
    }, { passive: true });

    mapContainer.addEventListener('touchmove', (e) => {
      this.handleTouchMove(e);
    }, { passive: true });

    mapContainer.addEventListener('touchend', (e) => {
      this.handleTouchEnd(e);
    }, { passive: true });
  }

  handleTouchStart(e) {
    if (e.touches.length === 1) {
      this.touchStartX = e.touches[0].clientX;
      this.touchStartY = e.touches[0].clientY;
    } else if (e.touches.length === 2) {
      this.isZooming = true;
    }
  }

  handleTouchMove(e) {
    if (e.touches.length === 2 && this.isZooming) {
      // Handle pinch zoom if needed in future
    }
  }

  handleTouchEnd(e) {
    if (e.changedTouches.length === 1) {
      this.touchEndX = e.changedTouches[0].clientX;
      this.touchEndY = e.changedTouches[0].clientY;
      this.detectSwipe();
    }
    this.isZooming = false;
  }

  detectSwipe() {
    const deltaX = this.touchEndX - this.touchStartX;
    const deltaY = this.touchEndY - this.touchStartY;
    const minSwipeDistance = 50;

    if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > minSwipeDistance) {
      if (deltaX > 0) {
        this.handleSwipeRight();
      } else {
        this.handleSwipeLeft();
      }
    }

    if (Math.abs(deltaY) > Math.abs(deltaX) && Math.abs(deltaY) > minSwipeDistance) {
      if (deltaY > 0) {
        this.handleSwipeDown();
      } else {
        this.handleSwipeUp();
      }
    }
  }

  handleSwipeLeft() {
    const activeCarousel = document.querySelector('.carousel.show .carousel-control-next');
    if (activeCarousel) activeCarousel.click();
  }

  handleSwipeRight() {
    const activeCarousel = document.querySelector('.carousel.show .carousel-control-prev');
    if (activeCarousel) activeCarousel.click();
  }

  handleSwipeDown() {}
  handleSwipeUp() {}

  optimizeViewport() {
    let viewportMeta = document.querySelector('meta[name="viewport"]');

    if (!viewportMeta) {
      viewportMeta = document.createElement('meta');
      viewportMeta.name = 'viewport';
      viewportMeta.content = 'width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes';
      document.head.appendChild(viewportMeta);
    }

    if (!document.querySelector('meta[name="apple-mobile-web-app-capable"]')) {
      const appleMeta = document.createElement('meta');
      appleMeta.name = 'apple-mobile-web-app-capable';
      appleMeta.content = 'yes';
      document.head.appendChild(appleMeta);
    }

    if (!document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]')) {
      const statusMeta = document.createElement('meta');
      statusMeta.name = 'apple-mobile-web-app-status-bar-style';
      statusMeta.content = 'black-translucent';
      document.head.appendChild(statusMeta);
    }
  }

  preventDoubleTapZoom() {
    document.addEventListener('touchend', (e) => {
      const target = e.target;

      if (target.matches('button, .btn, a, [role="button"], path')) {
        const currentTime = new Date().getTime();
        const tapLength = currentTime - this.lastTouchTime;

        if (tapLength < this.doubleTapDelay && tapLength > 0) {
          e.preventDefault();
        }

        this.lastTouchTime = currentTime;
      }
    }, { passive: false });
  }

  optimizeModalsForMobile() {
    if (!this.isMobile) return;

    const modals = document.querySelectorAll('.modal-dialog');
    modals.forEach(modal => {
      modal.classList.add('modal-fullscreen-sm-down');
    });

    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('shown.bs.modal', () => {
        modal.querySelector('.modal-body')?.scrollTo(0, 0);
        this.forceModalLightColors(modal);
        document.body.style.position = 'fixed';
        document.body.style.top = `-${window.scrollY}px`;
        document.body.style.width = '100%';
      });

      modal.addEventListener('hidden.bs.modal', () => {
        const scrollY = document.body.style.top;
        document.body.style.position = '';
        document.body.style.top = '';
        document.body.style.width = '';
        window.scrollTo(0, parseInt(scrollY || '0') * -1);
      });
    });
  }

  forceModalLightColors(modal) {
    if (!this.isMobile) return;

    // Check current theme
    const isDarkTheme = document.documentElement.getAttribute('data-theme') === 'dark';

    // If dark theme is active, use dark colors; otherwise use light colors
    const bgColor = isDarkTheme ? '#1a1a1a' : '#ffffff';
    const textColor = isDarkTheme ? '#f0f0f0' : '#212529';
    const secondaryTextColor = isDarkTheme ? '#b0b0b0' : '#666666';

    const modalContent = modal.querySelector('.modal-content');
    const modalHeader = modal.querySelector('.modal-header');
    const modalBody = modal.querySelector('.modal-body');
    const modalTitle = modal.querySelector('.modal-title');

    if (modalContent) {
      modalContent.style.backgroundColor = bgColor;
      modalContent.style.color = textColor;
      modalContent.style.borderColor = isDarkTheme ? '#333333' : '#dee2e6';
    }
    if (modalHeader) {
      modalHeader.style.backgroundColor = bgColor;
      modalHeader.style.color = textColor;
      modalHeader.style.borderColor = isDarkTheme ? '#333333' : '#dee2e6';
    }
    if (modalBody) {
      modalBody.style.backgroundColor = bgColor;
      modalBody.style.color = textColor;
    }
    if (modalTitle) modalTitle.style.color = textColor;

    const tables = modal.querySelectorAll('.table');
    tables.forEach(table => {
      table.style.backgroundColor = bgColor;
      table.style.color = textColor;

      const cells = table.querySelectorAll('th, td');
      cells.forEach(cell => {
        cell.style.color = textColor;
        cell.style.backgroundColor = 'transparent';
        cell.style.borderColor = isDarkTheme ? '#333333' : '#dee2e6';
      });

      const stripeRows = table.querySelectorAll('tbody tr:nth-of-type(odd)');
      stripeRows.forEach(row => {
        row.style.backgroundColor = isDarkTheme ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)';
      });
    });

    const textElements = modal.querySelectorAll('h1, h2, h3, h4, h5, h6, p, div, span');
    textElements.forEach(el => {
      if (!el.classList.contains('btn-close')) {
        el.style.color = textColor;
      }
    });

    const links = modal.querySelectorAll('a');
    links.forEach(link => {
      if (!link.classList.contains('btn-close')) {
        if (link.classList.contains('btn') || link.classList.contains('btn-primary')) {
          link.style.color = '#ffffff';
          link.style.backgroundColor = '#0d6efd';
        } else {
          link.style.color = isDarkTheme ? '#64b5f6' : '#0d6efd';
        }
      }
    });

    const buttons = modal.querySelectorAll('.btn, button');
    buttons.forEach(btn => {
      if (btn.classList.contains('btn-primary')) {
        btn.style.color = '#ffffff';
        btn.style.backgroundColor = '#0d6efd';
      } else if (!btn.classList.contains('btn-close') && btn.classList.contains('btn')) {
        btn.style.color = textColor;
      }
    });

    // Style close button for dark mode
    const closeBtn = modal.querySelector('.btn-close');
    if (closeBtn && isDarkTheme) {
      closeBtn.style.filter = 'invert(1)';
    }

    console.log(`Applied ${isDarkTheme ? 'dark' : 'light'} modal theme for mobile`);
  }

  setupSwipeGestures() {
    document.addEventListener('DOMContentLoaded', () => {
      const carousels = document.querySelectorAll('.carousel');
      carousels.forEach(carousel => {
        carousel.setAttribute('data-bs-touch', 'true');
        carousel.setAttribute('data-bs-interval', 'false');
      });
    });
  }

  handleOrientationChange() {
    window.addEventListener('orientationchange', () => {
      setTimeout(() => {
        this.detectDevice();

        if (window.AccessibilityManager) {
          const orientation = window.innerWidth > window.innerHeight ? 'ÿ£ŸÅŸÇŸä' : 'ÿπŸÖŸàÿØŸä';
          window.AccessibilityManager.announce(`ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿßÿ™ÿ¨ÿßŸá ÿ•ŸÑŸâ ${orientation}`);
        }
      }, 100);
    });

    let resizeTimer;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(() => {
        this.detectDevice();
      }, 250);
    });
  }

  optimizeMobileTooltip() {
    if (!this.isMobile) return;

    const tooltip = document.getElementById('tooltip');
    const mapPaths = document.querySelectorAll('.map-container path');

    mapPaths.forEach(path => {
      path.addEventListener('touchstart', (e) => {
        const event = new MouseEvent('mouseover', {
          bubbles: true,
          cancelable: true,
          view: window
        });
        path.dispatchEvent(event);

        setTimeout(() => {
          if (tooltip) tooltip.style.display = 'none';
        }, 2000);
      }, { passive: true });
    });
  }

  makeTablesResponsive() {
    if (!this.isMobile) return;

    const tables = document.querySelectorAll('.table');
    tables.forEach(table => {
      if (!table.parentElement.classList.contains('table-responsive')) {
        const wrapper = document.createElement('div');
        wrapper.className = 'table-responsive';
        table.parentNode.insertBefore(wrapper, table);
        wrapper.appendChild(table);
      }
    });
  }

  optimizeImages() {
    if (!this.isMobile) return;

    const images = document.querySelectorAll('img');
    images.forEach(img => {
      img.loading = 'lazy';
      img.classList.add('img-fluid');
    });
  }

  isLandscape() {
    return window.innerWidth > window.innerHeight;
  }

  isPortrait() {
    return window.innerHeight > window.innerWidth;
  }

  getDevicePixelRatio() {
    return window.devicePixelRatio || 1;
  }

  hasNotch() {
    const iPhone = /iPhone/.test(navigator.userAgent) && !window.MSStream;
    const aspect = window.screen.width / window.screen.height;
    return iPhone && aspect.toFixed(3) === "0.462";
  }
}

window.MobileOptimizer = new MobileOptimizer();

/* ========================================================================
   Main Application
   ======================================================================== */

class EmployeeMapApp {
  constructor() {
    this.regionData = null;
    this.metadata = { totalRegions: 0, totalEmployees: 0 };
    this.currentLanguage = 'ar';
    this.container = null;
    this.tooltip = null;
    this.regionPanel = null;
    this.regionPanelBody = null;
    this.regionPanelTitle = null;
    this.regionPanelMeta = null;
    this.regionPanelPrev = null;
    this.regionPanelNext = null;
    this.regionPanelClose = null;
    this.regionPanelBackdrop = null;
    this.regionOrder = [];
    this.currentRegionId = null;
    this.lastFocusedPath = null;
    this.touchStartX = null;
    this.visitedRegions = new Set();

    this.handleGlobalKeydown = this.handleGlobalKeydown.bind(this);
    this.handlePanelTouchStart = this.handlePanelTouchStart.bind(this);
    this.handlePanelTouchEnd = this.handlePanelTouchEnd.bind(this);
  }

  async init() {
    try {
      console.log('Initializing Employee Map Application...');

      if (window.AccessibilityManager) {
        window.AccessibilityManager.init();
        window.AccessibilityManager.announceLoading('ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™');
      }

      if (window.MobileOptimizer) {
        window.MobileOptimizer.init();
      }

      ErrorHandler.showLoading('ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...');

      await this.loadData();
      this.cacheElements();
      this.setupEventListeners();

      ErrorHandler.hideLoading();

      if (window.AccessibilityManager) {
        window.AccessibilityManager.announceLoaded('ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠');
      }

      console.log('Application initialized successfully');
    } catch (error) {
      ErrorHandler.hideLoading();

      if (window.AccessibilityManager) {
        window.AccessibilityManager.announceError('ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™');
      }

      this.handleError('Failed to initialize application', error);
    }
  }

  async loadData() {
    try {
      console.log('Loading employee data...');

      if (typeof regionsData === 'undefined') {
        throw new Error('Employee data not loaded. Make sure data is embedded in app.js.');
      }

      const data = regionsData;

      try {
        DataValidator.validateData(data);
      } catch (validationError) {
        ErrorHandler.handleValidationError(validationError);
      }

      this.regionData = data.regions;
      if (data.metadata) {
        this.metadata = {
          totalRegions: data.metadata.totalRegions || Object.keys(data.regions || {}).length,
          totalEmployees: data.metadata.totalEmployees || 0
        };
      }
      if (!this.metadata.totalEmployees) {
        this.metadata.totalEmployees = Object.values(this.regionData || {}).reduce((acc, region) => {
          if (region && Array.isArray(region.employees)) {
            return acc + region.employees.length;
          }
          return acc;
        }, 0);
      }

      const totalEmployees = this.metadata.totalEmployees || (data.metadata && data.metadata.totalEmployees) || 0;
      const totalRegions = this.metadata.totalRegions || (data.metadata && data.metadata.totalRegions) || Object.keys(this.regionData || {}).length;
      console.log(`Loaded ${totalEmployees} employees across ${totalRegions} regions`);
    } catch (error) {
      ErrorHandler.logError('loadData', error, {
        source: 'embedded data'
      });

      throw new Error('Failed to load employee data: ' + error.message);
    }
  }

  cacheElements() {
    this.container = document.getElementById('map-container');
    this.tooltip = document.getElementById('tooltip');

    this.regionPanel = document.getElementById('regionPanel');
    this.regionPanelBody = document.getElementById('regionPanelBody');
    this.regionPanelTitle = document.getElementById('regionPanelTitle');
    this.regionPanelMeta = document.getElementById('regionPanelMeta');
    this.regionPanelPrev = document.getElementById('regionPanelPrev');
    this.regionPanelNext = document.getElementById('regionPanelNext');
    this.regionPanelClose = document.getElementById('regionPanelClose');
    this.regionPanelBackdrop = document.getElementById('regionPanelBackdrop');
    this.regionOrder = this.container
      ? Array.from(this.container.querySelectorAll('path'))
          .map(path => path.id)
          .filter(Boolean)
      : [];

    this.hudRegionsVisited = document.getElementById('hudRegionsVisited');
    this.hudRegionsTotal = document.getElementById('hudRegionsTotal');
    this.hudRegionEmployees = document.getElementById('hudRegionEmployees');

    if (!this.metadata.totalRegions && this.regionOrder.length > 0) {
      this.metadata.totalRegions = this.regionOrder.length;
    }

    if (this.hudRegionsTotal && this.metadata.totalRegions) {
      this.hudRegionsTotal.textContent = this.metadata.totalRegions;
    }

  }

  setupEventListeners() {
    this.container.querySelectorAll('path').forEach(path => {
      this.setupRegionEvents(path);
    });

    if (this.regionPanelPrev) {
      this.regionPanelPrev.addEventListener('click', () => this.navigateRegion(-1));
    }
    if (this.regionPanelNext) {
      this.regionPanelNext.addEventListener('click', () => this.navigateRegion(1));
    }
    if (this.regionPanelClose) {
      this.regionPanelClose.addEventListener('click', () => this.closeRegionPanel());
    }
    if (this.regionPanelBackdrop) {
      this.regionPanelBackdrop.addEventListener('click', () => this.closeRegionPanel());
    }

    if (this.regionPanel) {
      this.regionPanel.addEventListener('touchstart', this.handlePanelTouchStart, { passive: true });
      this.regionPanel.addEventListener('touchend', this.handlePanelTouchEnd, { passive: true });
    }

    document.addEventListener('keydown', this.handleGlobalKeydown);
  }

  setupRegionEvents(path) {
    const regionId = path.id;
    const region = this.regionData[regionId];

    if (!region) return;

    path.addEventListener('mouseover', () => {
      this.showTooltip(region);
    });

    path.addEventListener('mousemove', (e) => {
      this.positionTooltip(e);
    });

    path.addEventListener('mouseout', () => {
      this.hideTooltip();
    });

    path.addEventListener('click', () => {
      this.lastFocusedPath = path;
      this.openRegionPanel(regionId);
    });
  }

  showTooltip(region) {
    this.tooltip.innerHTML = `<strong>${region.name}</strong><br>ÿπÿØÿØ ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ: ${region.employees.length}`;
    this.tooltip.style.display = 'block';
  }

  positionTooltip(e) {
    const rect = this.container.getBoundingClientRect();
    this.tooltip.style.left = (e.clientX - rect.left + 10) + 'px';
    this.tooltip.style.top = (e.clientY - rect.top + 10) + 'px';
  }

  hideTooltip() {
    this.tooltip.style.display = 'none';
  }

  openRegionPanel(regionId, options = {}) {
    if (!this.regionPanel || !this.regionPanelBody) return;

    const region = this.regionData[regionId];
    if (!region) return;

    const { announce = true, focusPanel = true } = options;
    this.currentRegionId = regionId;

    if (this.regionPanelTitle) {
      this.regionPanelTitle.textContent = region.name;
    }

    if (this.regionPanelMeta) {
      const englishName = region.nameEn ? ` / ${region.nameEn}` : '';
      this.regionPanelMeta.textContent = `${region.employees.length} ŸÖŸàÿ∏ŸÅ${englishName}`;
    }

    const hasEmployees = Array.isArray(region.employees) && region.employees.length > 0;

    let bodyContent = ``;

    if (hasEmployees) {
      const employeesMarkup = region.employees.map((emp, index) => `
        <div class="employee-card">
          <div class="employee-card__content">
            <span class="employee-card__name">${emp.name}</span>
            ${emp.nameEn ? `<span class="employee-card__name-en">${emp.nameEn}</span>` : ''}
            <span class="employee-card__position">${emp.position}</span>
            ${emp.positionEn ? `<span class="employee-card__position-en">${emp.positionEn}</span>` : ''}
          </div>
          <img src="${emp.images && emp.images[0] ? emp.images[0] : 'images/placeholder-avatar.svg'}"
               class="employee-card__image"
               alt="${emp.name}"
               onerror="ImageHandler.handleImageError(this, '${emp.name}')">
        </div>
      `).join('');

      bodyContent += `<div class="region-panel__list">${employeesMarkup}</div>`;
    } else {
      bodyContent += `<p class="region-panel__placeholder">ŸÑÿß ŸäŸàÿ¨ÿØ ŸÖŸàÿ∏ŸÅŸàŸÜ ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© ÿ≠ÿßŸÑŸäÿßŸã.</p>`;
    }

    this.regionPanelBody.innerHTML = bodyContent;
    this.regionPanelBody.scrollTop = 0;

    this.regionPanel.classList.add('is-active');
    this.regionPanel.setAttribute('aria-hidden', 'false');

    if (this.regionPanelBackdrop) {
      this.regionPanelBackdrop.hidden = false;
      this.regionPanelBackdrop.classList.add('is-active');
    }

    this.updatePanelNavigation();
    this.highlightRegion(regionId);
    this.markRegionVisited(regionId);
    this.updateHud(region);

    if (focusPanel) {
      requestAnimationFrame(() => {
        if (this.regionPanelBody) {
          this.regionPanelBody.focus();
        }
      });
    }

    if (window.AccessibilityManager && announce) {
      window.AccessibilityManager.announce(`ŸÖŸÜÿ∑ŸÇÿ© ${region.name} ÿ™ÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ${region.employees.length} ŸÖŸàÿ∏ŸÅ`);
    }
  }

  closeRegionPanel() {
    if (!this.regionPanel) return;

    this.regionPanel.classList.remove('is-active');
    this.regionPanel.setAttribute('aria-hidden', 'true');

    if (this.regionPanelBackdrop) {
      this.regionPanelBackdrop.classList.remove('is-active');
      this.regionPanelBackdrop.hidden = true;
    }

    if (this.regionPanelBody) {
      this.regionPanelBody.innerHTML = `<p class="region-panel__placeholder">ÿßÿÆÿ™ÿ± ŸÖŸÜÿ∑ŸÇÿ© ŸÖŸÜ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ© ŸÑÿπÿ±ÿ∂ ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ.</p>`;
    }

    this.clearRegionHighlight();
    this.currentRegionId = null;
    this.updatePanelNavigation();
    this.touchStartX = null;

    if (this.lastFocusedPath) {
      this.lastFocusedPath.focus();
    }

    if (window.AccessibilityManager) {
      window.AccessibilityManager.announce('ÿ™ŸÖ ÿ•ÿ∫ŸÑÿßŸÇ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©');
    }
  }

  navigateRegion(direction = 1) {
    if (!this.isPanelActive()) return;

    const currentIndex = this.regionOrder.indexOf(this.currentRegionId);
    if (currentIndex === -1) return;

    let nextIndex = currentIndex + direction;

    if (this.regionOrder.length > 0) {
      nextIndex = (nextIndex + this.regionOrder.length) % this.regionOrder.length;
    }

    const nextRegionId = this.regionOrder[nextIndex];
    const nextPath = document.getElementById(nextRegionId);
    if (nextPath) {
      this.lastFocusedPath = nextPath;
      nextPath.focus();
    }

    this.openRegionPanel(nextRegionId, { announce: true, focusPanel: true });
  }

  updatePanelNavigation() {
    const index = this.regionOrder.indexOf(this.currentRegionId);
    const active = this.isPanelActive();

    const shouldDisable = !active || index === -1 || this.regionOrder.length <= 1;

    if (this.regionPanelPrev) {
      this.regionPanelPrev.disabled = shouldDisable;
    }

    if (this.regionPanelNext) {
      this.regionPanelNext.disabled = shouldDisable;
    }
  }

  highlightRegion(regionId) {
    if (!this.container) return;

    this.container.querySelectorAll('path').forEach(path => {
      if (path.id === regionId) {
        path.classList.add('region-active');
        path.classList.remove('region-dim');
        path.setAttribute('aria-current', 'true');
      } else {
        path.classList.remove('region-active');
        path.classList.add('region-dim');
        path.removeAttribute('aria-current');
      }
    });
  }

  markRegionVisited(regionId) {
    if (!regionId) return;

    const previousCount = this.visitedRegions.size;
    this.visitedRegions.add(regionId);

    if (window.AccessibilityManager && this.visitedRegions.size !== previousCount) {
      window.AccessibilityManager.announce(
        `ÿ™ŸÖ ÿßÿ≥ÿ™ŸÉÿ¥ÿßŸÅ ${this.visitedRegions.size} ŸÖŸÜ ${this.metadata.totalRegions} ŸÖŸÜÿßÿ∑ŸÇ`
      );
    }
  }

  clearRegionHighlight() {
    if (!this.container) return;

    this.container.querySelectorAll('path').forEach(path => {
      path.classList.remove('region-active', 'region-dim');
      path.removeAttribute('aria-current');
    });
  }

  isPanelActive() {
    return !!(this.regionPanel && this.regionPanel.classList.contains('is-active'));
  }

  handleGlobalKeydown(event) {
    if (!this.isPanelActive()) return;

    switch (event.key) {
      case 'ArrowLeft':
      case 'ArrowUp':
        event.preventDefault();
        this.navigateRegion(-1);
        break;
      case 'ArrowRight':
      case 'ArrowDown':
        event.preventDefault();
        this.navigateRegion(1);
        break;
      case 'Escape':
        event.preventDefault();
        this.closeRegionPanel();
        break;
      default:
        break;
    }
  }

  handlePanelTouchStart(event) {
    if (!this.isPanelActive() || !event.changedTouches || event.changedTouches.length === 0) {
      return;
    }
    this.touchStartX = event.changedTouches[0].clientX;
  }

  handlePanelTouchEnd(event) {
    if (!this.isPanelActive() || this.touchStartX === null || !event.changedTouches || event.changedTouches.length === 0) {
      this.touchStartX = null;
      return;
    }

    const touchEndX = event.changedTouches[0].clientX;
    const deltaX = touchEndX - this.touchStartX;
    const threshold = 45;

    if (Math.abs(deltaX) >= threshold) {
      if (deltaX > 0) {
        this.navigateRegion(-1);
      } else {
        this.navigateRegion(1);
      }
    }

    this.touchStartX = null;
  }

  updateHud(region) {
    if (this.hudRegionEmployees && region) {
      this.hudRegionEmployees.textContent = region.employees.length;
    }
    if (this.hudRegionsVisited) {
      this.hudRegionsVisited.textContent = this.visitedRegions.size;
    }
  }

  handleError(message, error) {
    console.error(message, error);

    ErrorHandler.logError('Application Error', error, { context: message });

    ErrorHandler.showError('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ. Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿµŸÅÿ≠ÿ©.', 'error');
  }
}

// Monitor network status
window.addEventListener('online', () => {
  console.log('Network connection restored');
  const statusDiv = document.querySelector('.network-status');
  if (statusDiv) statusDiv.remove();
});

window.addEventListener('offline', () => {
  console.warn('Network connection lost');
  const statusDiv = document.createElement('div');
  statusDiv.className = 'network-status offline';
  statusDiv.textContent = 'ŸÑÿß ŸäŸàÿ¨ÿØ ÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™';
  document.body.appendChild(statusDiv);
});

const THEME_STORAGE_KEY = 'moe-ui-theme';

function applyTheme(theme) {
  const resolvedTheme = theme === 'dark' ? 'dark' : 'light';
  document.documentElement.setAttribute('data-theme', resolvedTheme);
  document.body.setAttribute('data-theme', resolvedTheme);

  const themeToggle = document.getElementById('themeToggle');
  if (themeToggle) {
    const icon = themeToggle.querySelector('.cta-toggle__icon');
    const label = themeToggle.querySelector('.cta-toggle__label');
    themeToggle.setAttribute('aria-pressed', resolvedTheme === 'dark');
    if (icon) {
      icon.textContent = resolvedTheme === 'dark' ? 'üåú' : 'üåû';
    }
    if (label) {
      label.textContent = resolvedTheme === 'dark' ? 'ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿØÿßŸÉŸÜ' : 'ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÅÿßÿ™ÿ≠';
    }
  }
}

function initThemeToggle() {
  const themeToggle = document.getElementById('themeToggle');
  if (!themeToggle) return;

  const storedTheme = localStorage.getItem(THEME_STORAGE_KEY);
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  const initialTheme = storedTheme || (prefersDark ? 'dark' : 'light');
  applyTheme(initialTheme);

  themeToggle.addEventListener('click', () => {
    const currentTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
    const nextTheme = currentTheme === 'dark' ? 'light' : 'dark';
    applyTheme(nextTheme);
    localStorage.setItem(THEME_STORAGE_KEY, nextTheme);
  });

  const mediaQuery = window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)') : null;
  if (mediaQuery) {
    const listener = (event) => {
      const storedValue = localStorage.getItem(THEME_STORAGE_KEY);
      if (storedValue) return;
      applyTheme(event.matches ? 'dark' : 'light');
    };
    if (typeof mediaQuery.addEventListener === 'function') {
      mediaQuery.addEventListener('change', listener);
    } else if (typeof mediaQuery.addListener === 'function') {
      mediaQuery.addListener(listener);
    }
  }
}

// Initialize app when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
  const app = new EmployeeMapApp();
  app.init();
  initThemeToggle();
});
  </script>

</body>
</html>
